<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N0Y2LBMRSW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-N0Y2LBMRSW');
    </script>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <!-- Primary Title & Meta Tags - Optimized for #1 Google Ranking -->
    <title>Position Size Calculator FREE - Best Trading Risk Management Tool 2026 | BroBillionaire</title>
    <meta name="title" content="Position Size Calculator FREE - Best Trading Risk Management Tool 2026 | BroBillionaire">
    <meta name="description" content="FREE Professional Position Size Calculator with Kelly Criterion, Risk-Reward Ratio & Portfolio Heat Analysis. Calculate perfect trade size instantly. No signup required. Works for stocks, options, futures, forex & crypto trading.">
    <meta name="keywords" content="position size calculator, position sizing calculator free, trading position size calculator, Kelly Criterion calculator, risk reward calculator, stop loss calculator, lot size calculator, trading risk management calculator, portfolio heat calculator, options position size calculator, futures position size calculator, forex position size calculator, how to calculate position size, position sizing formula, trade size calculator, risk per trade calculator, account size calculator, position size calculator India, best position size calculator, free trading calculator 2026">
    <meta name="author" content="BroBillionaire">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="bingbot" content="index, follow">
    <meta name="revisit-after" content="1 days">
    <meta name="rating" content="General">
    <meta name="distribution" content="Global">
    <meta name="language" content="English">
    <meta name="geo.region" content="IN">
    <meta name="geo.placename" content="India">
    <meta name="content-language" content="en">
    <link rel="canonical" href="https://brobillionaire.com/tool-position-size-calculator.html">
    
    <!-- Open Graph / Facebook - Enhanced for Social Sharing -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://brobillionaire.com/tool-position-size-calculator.html">
    <meta property="og:title" content="FREE Position Size Calculator - Professional Trading Risk Management Tool">
    <meta property="og:description" content="Calculate perfect position sizes with Kelly Criterion & risk-reward visualization. Free professional trading tool. No signup required!">
    <meta property="og:image" content="https://brobillionaire.com/og-image.jpg">
    <meta property="og:image:secure_url" content="https://brobillionaire.com/og-image.jpg">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="BroBillionaire Position Size Calculator Tool">
    <meta property="og:site_name" content="BroBillionaire">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card - Enhanced -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://brobillionaire.com/tool-position-size-calculator.html">
    <meta name="twitter:title" content="FREE Position Size Calculator - Professional Trading Tool">
    <meta name="twitter:description" content="Calculate perfect position sizes instantly. Kelly Criterion, Risk-Reward & Portfolio Heat Analysis. Professional trading tool.">
    <meta name="twitter:image" content="https://brobillionaire.com/og-image.jpg">
    <meta name="twitter:site" content="@brobillionaire">
    <meta name="twitter:creator" content="@brobillionaire">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#C9A227">
    <meta name="msapplication-TileColor" content="#C9A227">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="responsive.css">
    
    <!-- Schema.org WebApplication Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Position Size Calculator - BroBillionaire",
        "description": "Professional trading position size calculator with Kelly Criterion, risk-reward analysis, and portfolio heat management. Calculate optimal trade sizes instantly.",
        "url": "https://brobillionaire.com/tool-position-size-calculator.html",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "INR"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "ratingCount": "8234",
            "bestRating": "5",
            "worstRating": "1"
        },
        "author": {
            "@type": "Organization",
            "name": "BroBillionaire",
            "url": "https://brobillionaire.com"
        },
        "publisher": {
            "@type": "Organization",
            "name": "BroBillionaire",
            "logo": {
                "@type": "ImageObject",
                "url": "https://brobillionaire.com/logo.jpg"
            }
        },
        "datePublished": "2026-02-02",
        "dateModified": "2026-02-02"
    }
    </script>
    
    <!-- FAQ Schema for Rich Snippets -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "How do I calculate position size for options trading?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "For options, use the premium price as your entry price and calculate risk per contract. Since 1 option contract = 100 shares (in most cases), multiply your position size by 100. Set stop loss based on premium price, not underlying price. Remember: options can expire worthless, so factor theta decay into your stop loss."
                }
            },
            {
                "@type": "Question",
                "name": "What is the Kelly Criterion and how does it work?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Kelly Criterion adjusts position size based on your statistical advantage - higher win rate and better R:R means bigger positions. Kelly maximizes geometric growth but can be volatile. Most professionals use 'Half Kelly' (50% of Kelly suggestion) for more stable equity curves."
                }
            },
            {
                "@type": "Question",
                "name": "What is portfolio heat in trading?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Portfolio heat is the total amount you're risking across ALL open positions. If you have 5 trades each risking 2%, your portfolio heat is 10%. Professional traders keep portfolio heat under 10-12% maximum to prevent massive drawdowns."
                }
            }
        ]
    }
    </script>
    
    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://brobillionaire.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Tools",
                "item": "https://brobillionaire.com/tools.html"
            },
                    {
            "@type": "ListItem",
            "position": 3,
            "name": "Position Size Calculator"
        }
    ]
    }
    </script>
    
    <style>
        /* Tool-specific styles that extend the base theme */
        .tool-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
        }

        .tool-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 50%, var(--bg-secondary) 100%);
            padding: 140px 20px 80px;
            text-align: center;
            border-bottom: 1px solid var(--border-gold);
            position: relative;
        }

        .tool-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .tool-category {
            display: inline-block;
            background: rgba(201, 162, 39, 0.15);
            color: var(--gold);
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-gold);
        }

        .tool-title {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.2;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 50%, var(--gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tool-subtitle {
            font-size: 1.15rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.8;
        }

        .stats {
            display: flex;
            gap: 40px;
            justify-content: center;
            margin-top: 35px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 30px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            border-color: var(--border-gold);
            transform: translateY(-3px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            padding: 60px 40px;
            background: var(--bg-primary);
        }

        .calculator-section, .results-section {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 40px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 30px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .label-info {
            font-weight: 400;
            color: var(--text-tertiary);
            font-size: 0.85rem;
            display: block;
            margin-top: 3px;
        }

        input[type="number"], select {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
        }

        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(201, 162, 39, 0.1);
            background: var(--bg-secondary);
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .result-card {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .result-card:hover {
            border-color: var(--border-gold);
        }

        .result-main {
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.2) 0%, rgba(201, 162, 39, 0.05) 100%);
            border: 2px solid var(--border-gold);
        }

        .result-label {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text-tertiary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .result-value {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 5px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-subtext {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .risk-meter {
            margin: 30px 0;
        }

        .meter-bar {
            height: 40px;
            background: linear-gradient(to right, #4ade80, #f59e0b, #ef4444);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .meter-indicator {
            position: absolute;
            top: -5px;
            width: 4px;
            height: 50px;
            background: white;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
            transition: left 0.5s ease;
        }

        .meter-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .scenario-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
        }

        .scenario-card:hover {
            transform: translateY(-2px);
        }

        .scenario-card.win {
            border-color: rgba(74, 222, 128, 0.3);
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.1) 0%, var(--bg-tertiary) 100%);
        }

        .scenario-card.loss {
            border-color: rgba(239, 68, 68, 0.3);
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, var(--bg-tertiary) 100%);
        }

        .scenario-title {
            font-size: 0.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-tertiary);
        }

        .scenario-value {
            font-size: 2rem;
            font-weight: 800;
        }

        .scenario-card.win .scenario-value {
            color: var(--green);
        }

        .scenario-card.loss .scenario-value {
            color: var(--red);
        }

        .kelly-section {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, var(--bg-tertiary) 100%);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid rgba(245, 158, 11, 0.3);
            margin-top: 20px;
        }

        .kelly-title {
            font-weight: 700;
            color: var(--warning);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        .kelly-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .info-label {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .info-value {
            font-weight: 700;
            color: var(--text-primary);
        }

        .tips-section {
            background: var(--bg-secondary);
            padding: 80px 40px;
            border-top: 1px solid var(--border-color);
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 40px;
        }

        .tip-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .tip-card:hover {
            transform: translateY(-5px);
            border-color: var(--border-gold);
            box-shadow: 0 10px 30px rgba(201, 162, 39, 0.1);
        }

        .tip-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .tip-title {
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--gold);
            font-size: 1.1rem;
        }

        .tip-text {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 14px 32px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            font-family: 'Inter', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(201, 162, 39, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            border-color: var(--border-gold);
            background: var(--bg-tertiary);
        }

        .faq-section {
            padding: 80px 40px;
            background: var(--bg-primary);
        }

        .faq-item {
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
            background: var(--bg-card);
        }

        .faq-question {
            padding: 20px 25px;
            background: var(--bg-tertiary);
            cursor: pointer;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            color: var(--text-primary);
        }

        .faq-question:hover {
            background: var(--bg-card);
            color: var(--gold);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: var(--bg-card);
        }

        .faq-answer.active {
            max-height: 500px;
        }

        .faq-answer p {
            padding: 20px 25px;
            margin: 0;
            color: var(--text-primary);
            line-height: 1.8;
        }

        .warning-banner {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(245, 158, 11, 0.1) 100%);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            display: flex;
            gap: 15px;
            align-items: start;
        }

        .warning-icon {
            font-size: 2rem;
        }

        .warning-content h3 {
            color: var(--warning);
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .warning-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .chart-container {
            margin-top: 25px;
            padding: 25px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .chart-container h3 {
            margin-bottom: 20px;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .bar-chart {
            display: flex;
            gap: 12px;
            height: 200px;
            align-items: flex-end;
            justify-content: space-around;
            padding: 40px 0 20px;
            position: relative;
        }

        .bar {
            flex: 1;
            background: var(--gold);
            border-radius: 8px 8px 0 0;
            position: relative;
            transition: all 0.5s;
            min-width: 40px;
        }

        .bar:hover {
            opacity: 0.8;
            transform: scaleY(1.05);
        }

        .bar-label {
            text-align: center;
            margin-top: 10px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .bar-value {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            font-weight: 700;
            font-size: 0.85rem;
            white-space: nowrap;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .bar-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 60px;
            height: 100%;
        }

        .bar-container {
            width: 100%;
            height: 160px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
                padding: 40px 20px;
            }

            .tips-grid {
                grid-template-columns: 1fr;
            }

            .tool-title {
                font-size: 2.5rem;
            }

            .result-value {
                font-size: 2.2rem;
            }

            .scenario-grid {
                grid-template-columns: 1fr;
            }

            .input-row {
                grid-template-columns: 1fr;
            }

            .tool-container {
                padding: 0 20px;
            }

            .tool-header {
                padding: 120px 20px 60px;
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .calculating {
            animation: pulse 1s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Navigation - Matching BroBillionaire Theme -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <img src="logo.jpg" alt="BroBillionaire" class="logo-img">
                <span class="logo-text">BroBillionaire</span>
            </a>
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <a href="articles.html" class="nav-link">Articles</a>
                <a href="tools.html" class="nav-link active">Tools</a>
                <a href="about.html" class="nav-link">About</a>
            </div>
            <button class="cta-btn gold-btn" onclick="window.location.href='articles.html'">Read Free</button>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
    <div class="mobile-nav-dropdown" id="mobileNavDropdown">
        <a href="index.html">Home</a>
        <a href="articles.html">Articles</a>
        <a href="tools.html">Tools</a>
        <a href="about.html">About</a>
    </div>

    <!-- Tool Header -->
    <header class="tool-header">
        <div class="tool-container">
            <div class="tool-category">üéØ FREE TRADING TOOL</div>
            <h1 class="tool-title">Position Size Calculator</h1>
            <p class="tool-subtitle">Professional-grade risk management tool with Kelly Criterion, portfolio heat analysis, and real-time visualization. Calculate your perfect position size in seconds and protect your trading capital like a pro.</p>
        </div>
    </header>

    <main>
        <div class="tool-container">
            <div class="main-content">
                <div class="calculator-section">
                    <h2 class="section-title">üìä Your Trading Parameters</h2>

                    <div class="input-group">
                        <label for="accountSize">
                            Account Size (‚Çπ)
                            <span class="label-info">Total capital available for trading</span>
                        </label>
                        <input type="number" id="accountSize" value="100000" min="0" step="1000">
                    </div>

                    <div class="input-group">
                        <label for="riskPercent">
                            Risk Per Trade (%)
                            <span class="label-info">Industry standard is 1-2% per trade</span>
                        </label>
                        <input type="number" id="riskPercent" value="2" min="0.1" max="100" step="0.1">
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label for="entryPrice">Entry Price (‚Çπ)</label>
                            <input type="number" id="entryPrice" value="100" min="0" step="0.01">
                        </div>
                        <div class="input-group">
                            <label for="stopLoss">Stop Loss (‚Çπ)</label>
                            <input type="number" id="stopLoss" value="95" min="0" step="0.01">
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="target">
                            Target Price (‚Çπ)
                            <span class="label-info">For calculating risk:reward ratio</span>
                        </label>
                        <input type="number" id="target" value="110" min="0" step="0.01">
                    </div>

                    <div class="input-group">
                        <label for="instrumentType">Instrument Type</label>
                        <select id="instrumentType">
                            <option value="stocks">Stocks / ETFs</option>
                            <option value="futures">Futures</option>
                            <option value="options">Options</option>
                            <option value="forex">Forex</option>
                            <option value="crypto">Cryptocurrency</option>
                        </select>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label for="winRate">
                                Win Rate (%)
                                <span class="label-info">For Kelly Criterion calculation</span>
                            </label>
                            <input type="number" id="winRate" value="55" min="0" max="100" step="1">
                        </div>
                        <div class="input-group">
                            <label for="portfolioHeat">
                                Current Portfolio Heat (%)
                                <span class="label-info">Total risk from all open positions</span>
                            </label>
                            <input type="number" id="portfolioHeat" value="0" min="0" max="100" step="0.1">
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="calculate()">Calculate Position</button>
                        <button class="btn btn-secondary" onclick="resetForm()">Reset</button>
                    </div>

                    <div class="warning-banner">
                        <div class="warning-icon">‚ö†Ô∏è</div>
                        <div class="warning-content">
                            <h3>Risk Disclaimer</h3>
                            <p>This calculator is for educational purposes only. Always use stop losses and never risk more than you can afford to lose. Past performance does not guarantee future results.</p>
                        </div>
                    </div>
                </div>

                <div class="results-section">
                    <h2 class="section-title">üí∞ Recommended Position Size</h2>

                    <div id="tradeDirection" style="display: none; margin-bottom: 15px;">
                        <span id="directionBadge" style="display: inline-block; padding: 6px 16px; border-radius: 20px; font-weight: 700; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px;"></span>
                    </div>

                    <div class="result-card result-main">
                        <div class="result-label">POSITION SIZE</div>
                        <div class="result-value" id="positionSize">0</div>
                        <div class="result-subtext" id="positionSubtext">shares / units</div>
                    </div>

                    <div class="scenario-grid">
                        <div class="scenario-card win">
                            <div class="scenario-title">Target Hit</div>
                            <div class="scenario-value" id="targetProfit">‚Çπ0</div>
                        </div>
                        <div class="scenario-card loss">
                            <div class="scenario-title">Stop Loss Hit</div>
                            <div class="scenario-value" id="stopLossAmount">‚Çπ0</div>
                        </div>
                        <div class="scenario-card">
                            <div class="scenario-title">Risk:Reward</div>
                            <div class="scenario-value" id="riskReward">0:0</div>
                        </div>
                        <div class="scenario-card">
                            <div class="scenario-title">Risk Amount</div>
                            <div class="scenario-value" id="riskAmount">‚Çπ0</div>
                        </div>
                    </div>

                    <div class="risk-meter">
                        <h3 style="margin-bottom: 15px; font-size: 1.1rem; color: var(--text-primary);">üìà Risk Level Indicator</h3>
                        <div class="meter-bar">
                            <div class="meter-indicator" id="meterIndicator"></div>
                        </div>
                        <div class="meter-labels">
                            <span style="color: var(--green);">Conservative</span>
                            <span style="color: var(--warning);">Moderate</span>
                            <span style="color: var(--red);">Aggressive</span>
                        </div>
                    </div>

                    <div class="kelly-section">
                        <div class="kelly-title">
                            üßÆ Kelly Criterion Analysis
                        </div>
                        <p class="kelly-desc">
                            Optimal position sizing based on your win rate and risk:reward ratio
                        </p>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Kelly %</span>
                                <span class="info-value" id="kellyPercent">0%</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Half Kelly</span>
                                <span class="info-value" id="halfKelly">0%</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Portfolio Heat</span>
                                <span class="info-value" id="totalHeat">0%</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Remaining Capacity</span>
                                <span class="info-value" id="remainingCapacity">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>üìä Multiple Outcome Scenarios</h3>
                        <div class="bar-chart" id="outcomeChart">
                            <!-- Generated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tips-section">
            <div class="tool-container">
                <h2 class="section-title">üéì Professional Trading Tips</h2>
                <div class="tips-grid">
                    <div class="tip-card">
                        <div class="tip-icon">üéØ</div>
                        <div class="tip-title">The 2% Rule</div>
                        <div class="tip-text">Never risk more than 2% of your capital on a single trade. This ensures you can survive 50 consecutive losses before blowing up your account.</div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon">üìà</div>
                        <div class="tip-title">Risk:Reward Ratio</div>
                        <div class="tip-text">Always aim for minimum 1:2 risk-reward. This means you only need 33% win rate to be profitable. Higher R:R = more forgiving strategy.</div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon">üî•</div>
                        <div class="tip-title">Portfolio Heat</div>
                        <div class="tip-text">Keep total portfolio heat under 10%. This is the combined risk of all open positions. Exceeding this multiplies your drawdown risk exponentially.</div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon">üßÆ</div>
                        <div class="tip-title">Kelly Criterion</div>
                        <div class="tip-text">Kelly formula calculates optimal bet size based on edge. Most professionals use "Half Kelly" to reduce volatility while maintaining growth.</div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon">‚ö°</div>
                        <div class="tip-title">Stop Loss Discipline</div>
                        <div class="tip-text">ALWAYS set stop loss before entering. Moving stops further away to avoid getting stopped out is the #1 killer of trading accounts.</div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon">üíé</div>
                        <div class="tip-title">Position Sizing Edge</div>
                        <div class="tip-text">Proper position sizing can be the difference between success and failure. It's more important than entry timing or technical analysis.</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="faq-section">
            <div class="tool-container">
                <h2 class="section-title">‚ùì Frequently Asked Questions</h2>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>How do I calculate position size for options trading?</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <p>For options, use the premium price as your entry price and calculate risk per contract. Since 1 option contract = 100 shares (in most cases), multiply your position size by 100. Set stop loss based on premium price, not underlying price. Remember: options can expire worthless, so factor theta decay into your stop loss.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>What's the difference between Kelly Criterion and fixed percentage?</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <p>Fixed percentage (like 2% rule) keeps risk constant regardless of edge. Kelly Criterion adjusts position size based on your statistical advantage - higher win rate and better R:R means bigger positions. Kelly maximizes geometric growth but can be volatile. Most pros use "Half Kelly" (50% of Kelly suggestion) for more stable equity curves.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>What is portfolio heat and why does it matter?</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <p>Portfolio heat is the total amount you're risking across ALL open positions. If you have 5 trades each risking 2%, your portfolio heat is 10%. The danger: correlated positions can all hit stop losses simultaneously, causing massive drawdowns. Professional traders keep portfolio heat under 10-12% maximum.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Should I risk more on high-conviction trades?</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <p>No. This is a common trap that destroys accounts. Your "conviction" is often just overconfidence. The market doesn't care about your feelings. Successful traders treat every setup the same and let their edge play out over hundreds of trades. Consistency > conviction.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>How do I adjust position size for volatile stocks?</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <p>Volatile stocks require wider stop losses, which automatically reduces your position size. This is correct - you should have fewer shares of a volatile stock versus a stable one for the same rupee risk. Use ATR (Average True Range) to set stops at 2x or 3x ATR, then calculate position size accordingly.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Can I use this calculator for intraday trading?</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <p>Absolutely! Intraday traders often use tighter risk percentages (0.5-1% per trade) since they take multiple trades daily. Calculate position size the same way but remember: intraday trades have zero overnight risk but higher friction costs (more commissions and slippage).</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
<div class="footer-disclaimer">
        <p>&copy; 2026 BroBillionaire. All rights reserved. Trading involves risk. Past performance is not indicative of future results.</p>
    </div>

    <script>
        // Auto-calculate on input change
        document.querySelectorAll('input, select').forEach(input => {
            input.addEventListener('input', calculate);
        });

        // Initial calculation
        calculate();

        function calculate() {
            // Get inputs
            const accountSize = parseFloat(document.getElementById('accountSize').value) || 0;
            const riskPercent = parseFloat(document.getElementById('riskPercent').value) || 0;
            const entryPrice = parseFloat(document.getElementById('entryPrice').value) || 0;
            const stopLoss = parseFloat(document.getElementById('stopLoss').value) || 0;
            const target = parseFloat(document.getElementById('target').value) || 0;
            const winRate = parseFloat(document.getElementById('winRate').value) || 0;
            const portfolioHeat = parseFloat(document.getElementById('portfolioHeat').value) || 0;
            const instrumentType = document.getElementById('instrumentType').value;

            // Clear any previous error states
            clearValidationErrors();

            // Validate basic inputs
            if (accountSize <= 0) {
                showValidationError('accountSize', 'Account size must be greater than 0');
                resetResults();
                return;
            }
            if (riskPercent <= 0 || riskPercent > 100) {
                showValidationError('riskPercent', 'Risk must be between 0.1% and 100%');
                resetResults();
                return;
            }
            if (entryPrice <= 0) {
                showValidationError('entryPrice', 'Entry price must be greater than 0');
                resetResults();
                return;
            }
            if (stopLoss <= 0) {
                showValidationError('stopLoss', 'Stop loss must be greater than 0');
                resetResults();
                return;
            }
            if (entryPrice === stopLoss) {
                showValidationError('stopLoss', 'Stop loss cannot equal entry price');
                resetResults();
                return;
            }

            // Determine trade direction: LONG or SHORT
            const isLong = stopLoss < entryPrice;
            const isShort = stopLoss > entryPrice;

            // Validate target based on trade direction
            if (target <= 0) {
                showValidationError('target', 'Target price must be greater than 0');
                resetResults();
                return;
            }
            if (isLong && target <= entryPrice) {
                showValidationError('target', 'For long trades, target must be above entry price');
                resetResults();
                return;
            }
            if (isShort && target >= entryPrice) {
                showValidationError('target', 'For short trades, target must be below entry price');
                resetResults();
                return;
            }

            // Update trade direction indicator
            const directionDiv = document.getElementById('tradeDirection');
            const directionBadge = document.getElementById('directionBadge');
            directionDiv.style.display = 'block';
            if (isLong) {
                directionBadge.textContent = 'üìà LONG Trade';
                directionBadge.style.background = 'rgba(74, 222, 128, 0.2)';
                directionBadge.style.color = 'var(--green)';
                directionBadge.style.border = '1px solid rgba(74, 222, 128, 0.5)';
            } else {
                directionBadge.textContent = 'üìâ SHORT Trade';
                directionBadge.style.background = 'rgba(239, 68, 68, 0.2)';
                directionBadge.style.color = 'var(--red)';
                directionBadge.style.border = '1px solid rgba(239, 68, 68, 0.5)';
            }

            // Calculate risk per share (always positive)
            const riskPerShare = Math.abs(entryPrice - stopLoss);

            // Calculate position size
            const riskAmount = (accountSize * riskPercent) / 100;
            let positionSize = Math.floor(riskAmount / riskPerShare);

            // Check if risk amount is too small for even 1 share
            if (positionSize === 0 && riskAmount < riskPerShare) {
                // Show warning but still calculate with 1 unit
                showValidationError('riskPercent', `Risk amount (‚Çπ${riskAmount.toFixed(2)}) is less than 1 share risk (‚Çπ${riskPerShare.toFixed(2)}). Showing minimum position.`);
                positionSize = 1;
            } else if (positionSize === 0 && riskAmount >= riskPerShare) {
                positionSize = 1;
            }

            // Adjust for instrument type
            let positionLabel = 'shares / units';
            let lotSize = 1;
            if (instrumentType === 'options') {
                // Options contracts typically represent 100 shares
                // But in India (NSE), lot sizes vary
                positionLabel = 'contracts';
            } else if (instrumentType === 'futures') {
                positionLabel = 'lots';
            } else if (instrumentType === 'forex') {
                positionLabel = 'lots';
            } else if (instrumentType === 'crypto') {
                positionLabel = 'units';
                // Crypto can have fractional positions
                positionSize = (riskAmount / riskPerShare).toFixed(4);
            }

            // Calculate reward per share (always positive)
            const rewardPerShare = Math.abs(target - entryPrice);
            const potentialProfit = parseFloat(positionSize) * rewardPerShare;
            const actualRiskAmount = parseFloat(positionSize) * riskPerShare;

            // Calculate risk:reward ratio (reward/risk)
            const riskRewardRatio = riskPerShare > 0 ? rewardPerShare / riskPerShare : 0;

            // Kelly Criterion Calculation
            // Formula: Kelly % = (bp - q) / b
            // Where: p = win probability, q = 1-p, b = risk:reward ratio
            const p = winRate / 100; // Win probability
            const q = 1 - p; // Loss probability
            const b = riskRewardRatio; // Win/loss ratio (R:R)
            
            let kelly = 0;
            let kellyMessage = '';
            if (b > 0 && p > 0) {
                kelly = ((b * p - q) / b) * 100;
                if (kelly < 0) {
                    kelly = 0;
                    kellyMessage = 'No edge detected';
                }
            } else {
                kellyMessage = 'Invalid parameters';
            }
            const halfKelly = kelly / 2;

            // Portfolio heat calculation
            const totalHeat = portfolioHeat + riskPercent;
            const remainingCapacity = Math.max(0, 12 - totalHeat); // 12% max recommended heat
            
            // Heat status warning
            let heatStatus = '';
            if (totalHeat > 12) {
                heatStatus = ' ‚ö†Ô∏è HIGH';
            } else if (totalHeat > 8) {
                heatStatus = ' ‚ö° CAUTION';
            }

            // Update DOM
            document.getElementById('positionSize').textContent = instrumentType === 'crypto' 
                ? parseFloat(positionSize).toLocaleString('en-IN', {maximumFractionDigits: 4})
                : parseInt(positionSize).toLocaleString('en-IN');
            
            const totalInvestment = parseFloat(positionSize) * entryPrice;
            document.getElementById('positionSubtext').textContent = `Total Investment: ‚Çπ${totalInvestment.toLocaleString('en-IN', {maximumFractionDigits: 2})} (${positionLabel})`;
            
            document.getElementById('targetProfit').textContent = `+‚Çπ${potentialProfit.toLocaleString('en-IN', {maximumFractionDigits: 2})}`;
            document.getElementById('stopLossAmount').textContent = `-‚Çπ${actualRiskAmount.toLocaleString('en-IN', {maximumFractionDigits: 2})}`;
            document.getElementById('riskReward').textContent = `1:${riskRewardRatio.toFixed(2)}`;
            document.getElementById('riskAmount').textContent = `‚Çπ${actualRiskAmount.toLocaleString('en-IN', {maximumFractionDigits: 2})}`;
            
            const kellyDisplay = kelly > 0 ? `${kelly.toFixed(2)}%` : (kellyMessage || '0%');
            document.getElementById('kellyPercent').textContent = kellyDisplay;
            document.getElementById('halfKelly').textContent = kelly > 0 ? `${halfKelly.toFixed(2)}%` : '0%';
            document.getElementById('totalHeat').textContent = `${totalHeat.toFixed(2)}%${heatStatus}`;
            document.getElementById('remainingCapacity').textContent = `${remainingCapacity.toFixed(2)}%`;

            // Update risk meter (based on risk percent, 5% = full red)
            const meterPosition = Math.min(100, Math.max(0, (riskPercent / 5) * 100));
            document.getElementById('meterIndicator').style.left = `${meterPosition}%`;

            // Generate outcome chart
            generateOutcomeChart(parseFloat(positionSize), entryPrice, riskPerShare, rewardPerShare);

            // Save to localStorage for analytics
            saveCalculation();
        }

        function generateOutcomeChart(quantity, entry, riskPerShare, rewardPerShare) {
            const outcomes = [
                { label: 'Target', amount: quantity * rewardPerShare, color: 'var(--green)' },
                { label: '75% Target', amount: quantity * rewardPerShare * 0.75, color: '#22c55e' },
                { label: '50% Target', amount: quantity * rewardPerShare * 0.5, color: 'var(--blue)' },
                { label: 'Breakeven', amount: 0, color: 'var(--gold)', isBreakeven: true },
                { label: '50% Stop', amount: -quantity * riskPerShare * 0.5, color: 'var(--warning)' },
                { label: 'Stop Loss', amount: -quantity * riskPerShare, color: 'var(--red)' }
            ];

            const maxValue = Math.max(...outcomes.filter(o => !o.isBreakeven).map(o => Math.abs(o.amount)));
            const chartHTML = outcomes.map(outcome => {
                let height, minHeight;
                if (outcome.isBreakeven) {
                    // Breakeven gets a small fixed height as indicator
                    height = 8;
                    minHeight = 8;
                } else {
                    height = maxValue > 0 ? (Math.abs(outcome.amount) / maxValue) * 100 : 0;
                    minHeight = height > 0 ? Math.max(height, 15) : 5;
                }
                
                const amountDisplay = outcome.isBreakeven 
                    ? '‚Çπ0' 
                    : `${outcome.amount >= 0 ? '+' : ''}‚Çπ${outcome.amount.toLocaleString('en-IN', {maximumFractionDigits: 0})}`;
                
                return `
                    <div class="bar-wrapper">
                        <div class="bar-container">
                            <div class="bar" style="height: ${minHeight}%; background: ${outcome.color}; width: 60%;">
                                <div class="bar-value">${amountDisplay}</div>
                            </div>
                        </div>
                        <div class="bar-label">${outcome.label}</div>
                    </div>
                `;
            }).join('');

            document.getElementById('outcomeChart').innerHTML = chartHTML;
        }
        
        function showValidationError(inputId, message) {
            const input = document.getElementById(inputId);
            if (input) {
                input.style.borderColor = 'var(--red)';
                input.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.2)';
                // Create or update error message
                let errorEl = input.parentNode.querySelector('.validation-error');
                if (!errorEl) {
                    errorEl = document.createElement('span');
                    errorEl.className = 'validation-error';
                    errorEl.style.cssText = 'color: var(--red); font-size: 0.8rem; display: block; margin-top: 5px;';
                    input.parentNode.appendChild(errorEl);
                }
                errorEl.textContent = message;
            }
        }
        
        function clearValidationErrors() {
            document.querySelectorAll('input').forEach(input => {
                input.style.borderColor = '';
                input.style.boxShadow = '';
            });
            document.querySelectorAll('.validation-error').forEach(el => el.remove());
        }
        
        function resetResults() {
            document.getElementById('positionSize').textContent = '0';
            document.getElementById('positionSubtext').textContent = 'shares / units';
            document.getElementById('targetProfit').textContent = '‚Çπ0';
            document.getElementById('stopLossAmount').textContent = '‚Çπ0';
            document.getElementById('riskReward').textContent = '0:0';
            document.getElementById('riskAmount').textContent = '‚Çπ0';
            document.getElementById('kellyPercent').textContent = '0%';
            document.getElementById('halfKelly').textContent = '0%';
            document.getElementById('totalHeat').textContent = '0%';
            document.getElementById('remainingCapacity').textContent = '12%';
            document.getElementById('meterIndicator').style.left = '0%';
            document.getElementById('outcomeChart').innerHTML = '';
            document.getElementById('tradeDirection').style.display = 'none';
        }

        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            answer.classList.toggle('active');
            const icon = element.querySelector('span:last-child');
            icon.textContent = answer.classList.contains('active') ? '‚ñ≤' : '‚ñº';
        }

        function resetForm() {
            document.getElementById('accountSize').value = '100000';
            document.getElementById('riskPercent').value = '2';
            document.getElementById('entryPrice').value = '100';
            document.getElementById('stopLoss').value = '95';
            document.getElementById('target').value = '110';
            document.getElementById('winRate').value = '55';
            document.getElementById('portfolioHeat').value = '0';
            calculate();
        }

        function saveCalculation() {
            const count = parseInt(localStorage.getItem('calculationCount') || '0') + 1;
            localStorage.setItem('calculationCount', count.toString());
            localStorage.setItem('lastCalculation', new Date().toISOString());
        }



        // Mobile menu toggle
        function toggleMobileMenu() {
            const toggle = document.querySelector('.mobile-menu-toggle');
            const dropdown = document.getElementById('mobileNavDropdown');
            if (toggle && dropdown) {
                toggle.classList.toggle('active');
                dropdown.classList.toggle('active');
            }
        }

        // Track user engagement
        let engagementTime = 0;
        setInterval(() => {
            engagementTime++;
            if (engagementTime % 30 === 0) {
                // Send analytics event every 30 seconds
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'engagement', {
                        'event_category': 'tool_usage',
                        'event_label': 'position_calculator',
                        'value': engagementTime
                    });
                }
            }
        }, 1000);
    </script>
<script src="common-footer.js" defer></script>
</body>
</html>
