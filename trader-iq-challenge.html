<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N0Y2LBMRSW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-N0Y2LBMRSW');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trader IQ Challenge - Test Your Trading Knowledge | BroBillionaire</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="responsive.css">
    
    <meta name="description" content="Test your trading IQ with our viral quiz challenge! Answer 15 questions, compete on the leaderboard, and share your score. How smart is your trading brain?">
    <meta name="keywords" content="trading quiz, trader IQ test, stock market quiz, trading knowledge test, options quiz, share trading score">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://brobillionaire.com/trader-iq-challenge.html">
    
    <meta property="og:title" content="üß† Trader IQ Challenge - Test Your Trading Brain">
    <meta property="og:description" content="Can you beat the average trader? Take the viral trading quiz and prove your market IQ!">
    <meta property="og:url" content="https://brobillionaire.com/trader-iq-challenge.html">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://brobillionaire.com/og-image.jpg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #C9A227;
            --primary-glow: rgba(201, 162, 39, 0.4);
            --correct: #22c55e;
            --wrong: #ef4444;
            --bg: #0a0a0a;
            --card: #111111;
            --combo-1: #3b82f6;
            --combo-2: #a855f7;
            --combo-3: #ef4444;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Animated Background */
        .bg-grid {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                linear-gradient(rgba(201, 162, 39, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(201, 162, 39, 0.02) 1px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none;
        }
        
        .brain-float {
            position: fixed;
            font-size: 3rem;
            opacity: 0.05;
            animation: floatBrain 20s infinite;
            pointer-events: none;
        }
        
        @keyframes floatBrain {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(100px, -50px) rotate(10deg); }
            50% { transform: translate(50px, 50px) rotate(-5deg); }
            75% { transform: translate(-50px, 25px) rotate(5deg); }
        }
        
        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 15px 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(201, 162, 39, 0.2);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }
        
        .logo-img { width: 40px; height: 40px; border-radius: 10px; }
        .logo-text { font-size: 1.25rem; font-weight: 700; color: #fff; }
        
        /* Main Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 100px 20px 60px;
            position: relative;
            z-index: 10;
        }
        
        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 60px 20px;
        }
        
        .iq-icon {
            font-size: 6rem;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .start-screen h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #fff 0%, var(--primary) 50%, #fff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .start-screen p {
            font-size: 1.2rem;
            color: rgba(255,255,255,0.7);
            max-width: 500px;
            margin: 0 auto 40px;
            line-height: 1.7;
        }
        
        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .difficulty-btn {
            padding: 15px 30px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .difficulty-btn:hover,
        .difficulty-btn.selected {
            border-color: var(--primary);
            background: rgba(201, 162, 39, 0.1);
        }
        
        .difficulty-btn .icon { font-size: 1.5rem; margin-bottom: 8px; }
        .difficulty-btn .label { font-size: 0.9rem; color: rgba(255,255,255,0.6); }
        
        .start-btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 20px 50px;
            background: linear-gradient(135deg, var(--primary) 0%, #a68b1e 100%);
            border: none;
            border-radius: 60px;
            color: #000;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 40px var(--primary-glow);
        }
        
        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 50px var(--primary-glow);
        }
        
        .stats-preview {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 50px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .stat-label {
            color: rgba(255,255,255,0.5);
            font-size: 0.85rem;
        }
        
        /* Quiz Screen */
        .quiz-screen {
            display: none;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .progress-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .question-counter {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #e8d5a3);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .timer {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
        }
        
        .timer.warning { color: #f59e0b; }
        .timer.danger { color: var(--wrong); animation: timerPulse 0.5s infinite; }
        
        @keyframes timerPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .score-display {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--correct);
            position: relative;
        }
        
        /* Combo System */
        .combo-display {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            z-index: 500;
            background: linear-gradient(135deg, rgba(26,26,26,0.95) 0%, rgba(13,13,13,0.95) 100%);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 20px;
            display: none;
            animation: slideInRight 0.5s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateY(-50%) translateX(100px); opacity: 0; }
            to { transform: translateY(-50%) translateX(0); opacity: 1; }
        }
        
        .combo-display.active {
            display: block;
        }
        
        .combo-title {
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
            text-align: center;
            margin-bottom: 5px;
        }
        
        .combo-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            background: linear-gradient(135deg, var(--combo-1), var(--combo-2), var(--combo-3));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 0.5s infinite;
        }
        
        .combo-multiplier {
            font-size: 0.9rem;
            text-align: center;
            color: var(--primary);
            margin-top: 5px;
        }
        
        /* Power-ups */
        .powerups-panel {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .powerup-btn {
            position: relative;
            width: 60px;
            height: 60px;
            background: rgba(201, 162, 39, 0.1);
            border: 2px solid var(--primary);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .powerup-btn:hover:not(.disabled) {
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .powerup-btn.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .powerup-count {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            font-size: 0.7rem;
            color: #000;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .powerup-label {
            font-size: 0.6rem;
            color: rgba(255,255,255,0.6);
            margin-top: 2px;
        }
        
        /* Achievements */
        .achievement-popup {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 20px 25px;
            display: none;
            z-index: 1500;
            animation: slideInAchievement 0.5s ease;
            min-width: 280px;
        }
        
        @keyframes slideInAchievement {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .achievement-popup.show {
            display: block;
        }
        
        .achievement-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .achievement-icon {
            font-size: 2.5rem;
        }
        
        .achievement-text h3 {
            color: var(--primary);
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .achievement-text p {
            color: rgba(255,255,255,0.7);
            font-size: 0.85rem;
        }
        
        /* Leaderboard Tabs */
        .leaderboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
            overflow-x: auto;
            padding-bottom: 2px;
        }
        
        .leaderboard-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            color: rgba(255,255,255,0.5);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            white-space: nowrap;
        }
        
        .leaderboard-tab.active {
            color: var(--primary);
        }
        
        .leaderboard-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary);
        }
        
        .leaderboard-tab:hover {
            color: var(--primary);
        }
        
        .leaderboard-content {
            display: none;
        }
        
        .leaderboard-content.active {
            display: block;
        }
        
        .question-card {
            background: linear-gradient(135deg, rgba(26,26,26,0.9) 0%, rgba(13,13,13,0.9) 100%);
            border: 1px solid rgba(201, 162, 39, 0.2);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
        }
        
        .question-category {
            display: inline-block;
            padding: 6px 16px;
            background: rgba(201, 162, 39, 0.1);
            border-radius: 20px;
            color: var(--primary);
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            line-height: 1.5;
            margin-bottom: 30px;
        }
        
        .options-grid {
            display: grid;
            gap: 15px;
        }
        
        .option-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px 25px;
            background: rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            color: #fff;
            font-size: 1rem;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-btn:hover:not(.disabled) {
            border-color: var(--primary);
            background: rgba(201, 162, 39, 0.1);
        }
        
        .option-btn.correct {
            border-color: var(--correct);
            background: rgba(34, 197, 94, 0.15);
        }
        
        .option-btn.wrong {
            border-color: var(--wrong);
            background: rgba(239, 68, 68, 0.15);
        }
        
        .option-btn.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .option-letter {
            width: 35px;
            height: 35px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }
        
        .option-btn.correct .option-letter { background: var(--correct); color: #fff; }
        .option-btn.wrong .option-letter { background: var(--wrong); color: #fff; }
        
        .explanation-box {
            display: none;
            margin-top: 25px;
            padding: 20px;
            background: rgba(201, 162, 39, 0.1);
            border-left: 4px solid var(--primary);
            border-radius: 0 15px 15px 0;
        }
        
        .explanation-box h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .explanation-box p {
            color: rgba(255,255,255,0.8);
            line-height: 1.6;
        }
        
        .next-btn {
            display: none;
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary) 0%, #a68b1e 100%);
            border: none;
            border-radius: 15px;
            color: #000;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .next-btn:hover {
            transform: scale(1.02);
        }
        
        /* Result Screen */
        .result-screen {
            display: none;
            text-align: center;
        }
        
        .result-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
            border: 2px solid var(--primary);
            border-radius: 30px;
            padding: 50px 40px;
            position: relative;
            overflow: hidden;
        }
        
        .result-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(201, 162, 39, 0.1), transparent 30%);
            animation: rotate 10s linear infinite;
        }
        
        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }
        
        .result-content {
            position: relative;
            z-index: 1;
        }
        
        .result-badge {
            font-size: 5rem;
            margin-bottom: 20px;
        }
        
        .iq-score {
            font-family: 'Orbitron', sans-serif;
            font-size: 5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, #e8d5a3 50%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .iq-label {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .result-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .result-description {
            color: rgba(255,255,255,0.7);
            font-size: 1.1rem;
            line-height: 1.7;
            max-width: 500px;
            margin: 0 auto 30px;
        }
        
        .result-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .result-stat {
            text-align: center;
        }
        
        .result-stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
        }
        
        .result-stat-value.green { color: var(--correct); }
        .result-stat-value.gold { color: var(--primary); }
        .result-stat-value.blue { color: #3b82f6; }
        
        .result-stat-label {
            color: rgba(255,255,255,0.5);
            font-size: 0.85rem;
        }
        
        .percentile-bar {
            margin: 30px 0;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
        }
        
        .percentile-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: rgba(255,255,255,0.6);
            font-size: 0.85rem;
        }
        
        .percentile-track {
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .percentile-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--wrong), #f59e0b, var(--correct));
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        .percentile-marker {
            position: absolute;
            top: -8px;
            width: 36px;
            height: 36px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.8rem;
            transform: translateX(-50%);
            box-shadow: 0 4px 15px var(--primary-glow);
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .share-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 30px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }
        
        .share-btn:hover { transform: scale(1.05); }
        .share-btn.twitter { background: #1DA1F2; color: #fff; }
        .share-btn.whatsapp { background: #25D366; color: #fff; }
        .share-btn.retry { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); }
        
        .watermark {
            margin-top: 30px;
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Leaderboard Preview */
        .leaderboard-preview {
            margin-top: 40px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 25px;
        }
        
        .leaderboard-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            margin-bottom: 10px;
        }
        
        .leaderboard-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .leaderboard-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .leaderboard-avatar i {
            color: #000;
            font-size: 1.2rem;
        }
        
        .leaderboard-rank {
            width: 30px;
            height: 30px;
            background: rgba(201, 162, 39, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--primary);
        }
        
        .leaderboard-rank.gold { background: var(--primary); color: #000; }
        
        .leaderboard-name { flex: 1; }
        .leaderboard-score { font-family: 'Orbitron', sans-serif; color: var(--correct); }
        
        /* Name Modal */
        .name-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .name-modal.active {
            display: flex;
        }
        
        .name-content {
            background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
            border: 2px solid var(--primary);
            border-radius: 30px;
            padding: 50px 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
        }
        
        .name-content h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 15px;
        }
        
        .name-content p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 30px;
        }
        
        .profile-pic-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .profile-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: rgba(201, 162, 39, 0.2);
            border: 3px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
        }
        
        .profile-preview:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .profile-preview i {
            font-size: 2.5rem;
            color: var(--primary);
        }
        
        .profile-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        #profileInput {
            display: none;
        }
        
        .profile-upload-btn {
            color: var(--primary);
            font-size: 0.9rem;
            cursor: pointer;
            text-decoration: underline;
            transition: opacity 0.3s;
        }
        
        .profile-upload-btn:hover {
            opacity: 0.7;
        }
        
        .name-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            color: #fff;
            font-size: 1rem;
            text-align: center;
            margin-bottom: 25px;
            transition: all 0.3s;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(201, 162, 39, 0.05);
        }
        
        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        
        .name-content .cta-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary) 0%, #a68b1e 100%);
            border: none;
            border-radius: 15px;
            color: #000;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .name-content .cta-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px var(--primary-glow);
        }
        
        /* Confetti */
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1000;
        }
        
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confettiFall 4s ease-out forwards;
        }
        
        @keyframes confettiFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        /* Mobile */
        @media (max-width: 768px) {
            .start-screen h1 { font-size: 2rem; }
            .question-text { font-size: 1.2rem; }
            .iq-score { font-size: 3.5rem; }
            .quiz-header { flex-direction: column; gap: 15px; }
            .progress-bar { width: 100%; }
            .combo-display {
                right: 10px;
                padding: 15px;
                top: auto;
                bottom: 20px;
                transform: none;
            }
            .combo-value { font-size: 2rem; }
            .achievement-popup {
                right: 10px;
                left: 10px;
                min-width: auto;
            }
            .powerup-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            .difficulty-selector {
                flex-direction: column;
                align-items: stretch;
            }
            .difficulty-btn {
                width: 100%;
            }
            .leaderboard-tabs {
                gap: 5px;
            }
            .leaderboard-tab {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            .result-stats {
                gap: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 80px 15px 40px;
            }
            .start-screen h1 {
                font-size: 1.6rem;
            }
            .start-screen p {
                font-size: 1rem;
            }
            .question-card {
                padding: 25px;
            }
            .question-text {
                font-size: 1.1rem;
            }
            .option-btn {
                padding: 15px 20px;
                font-size: 0.95rem;
            }
            .result-card {
                padding: 30px 20px;
            }
            .iq-score {
                font-size: 2.8rem;
            }
            .result-title {
                font-size: 1.5rem;
            }
            .share-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }
        
        /* Particles and Effects */
        .score-particle {
            position: fixed;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            pointer-events: none;
            z-index: 1000;
            animation: scoreFloat 1s ease-out forwards;
        }
        
        @keyframes scoreFloat {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(1.5);
                opacity: 0;
            }
        }
        
        /* Smooth Transitions */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .shake {
            animation: shake 0.5s ease;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        /* Progress Ring */
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.3s;
            transform-origin: 50% 50%;
        }
    </style>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://brobillionaire.com/"
        },
                {
            "@type": "ListItem",
            "position": 2,
            "name": "Trader IQ Challenge - Test Your Trading Knowledge"
        }
    ]
}
    </script>
</head>
<body>
    <!-- Background -->
    <div class="bg-grid"></div>
    <div class="brain-float" style="top: 10%; left: 5%;">üß†</div>
    <div class="brain-float" style="top: 60%; right: 10%; animation-delay: -5s;">üìà</div>
    <div class="brain-float" style="top: 30%; right: 20%; animation-delay: -10s;">üí∞</div>
    
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <img src="logo.jpg" alt="BroBillionaire" class="logo-img">
                <span class="logo-text">BroBillionaire</span>
            </a>
        </div>
    </nav>
    <div class="mobile-nav-dropdown" id="mobileNavDropdown">
        <a href="index.html">Home</a>
        <a href="articles.html">Articles</a>
        <a href="tools.html">Calculators</a>
        <a href="viral-tools-hub.html">Viral Tools</a>
        <a href="community.html">Community</a>
        <a href="about.html">About</a>
    </div>
    
    <div class="container">
        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <div class="iq-icon">üß†</div>
            <h1>TRADER IQ CHALLENGE</h1>
            <p>Think you know trading? Put your market knowledge to the test with 15 challenging questions. Beat the clock, climb the leaderboard, share your score!</p>
            
            <div class="difficulty-selector">
                <div class="difficulty-btn selected" data-difficulty="beginner" onclick="selectDifficulty(this)">
                    <div class="icon">üå±</div>
                    <div><strong>Beginner</strong></div>
                    <div class="label">30 sec/question</div>
                </div>
                <div class="difficulty-btn" data-difficulty="pro" onclick="selectDifficulty(this)">
                    <div class="icon">‚ö°</div>
                    <div><strong>Pro</strong></div>
                    <div class="label">20 sec/question</div>
                </div>
                <div class="difficulty-btn" data-difficulty="legend" onclick="selectDifficulty(this)">
                    <div class="icon">üëë</div>
                    <div><strong>Legend</strong></div>
                    <div class="label">15 sec/question</div>
                </div>
            </div>
            
            <button class="start-btn" onclick="startQuiz()">
                <i class="fas fa-play"></i>
                Start Challenge
            </button>
            
            <div class="stats-preview">
                <div class="stat-item">
                    <div class="stat-value">15</div>
                    <div class="stat-label">Questions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">‚àû</div>
                    <div class="stat-label">Attempts</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalPlayersHome">0</div>
                    <div class="stat-label">Players Worldwide</div>
                </div>
            </div>
        </div>
        
        <!-- Quiz Screen -->
        <div class="quiz-screen" id="quizScreen">
            <div class="quiz-header">
                <div class="progress-info">
                    <div class="question-counter" id="questionCounter">Q1/15</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 6.67%"></div>
                    </div>
                </div>
                <div class="timer" id="timer">
                    <i class="fas fa-clock"></i>
                    <span id="timerValue">30</span>
                </div>
                <div class="score-display" id="scoreDisplay">
                    <i class="fas fa-star"></i> 0
                </div>
            </div>
            
            <div class="question-card" id="questionCard">
                <div class="question-category" id="questionCategory">Options Trading</div>
                <div class="question-text" id="questionText">
                    What does "ITM" stand for in options trading?
                </div>
                
                <div class="options-grid" id="optionsGrid">
                    <!-- Options will be injected here -->
                </div>
                
                <div class="explanation-box" id="explanationBox">
                    <h4>üí° Explanation</h4>
                    <p id="explanationText"></p>
                </div>
            </div>
            
            <button class="next-btn" id="nextBtn" onclick="nextQuestion()">
                Next Question <i class="fas fa-arrow-right"></i>
            </button>
            
            <!-- Power-ups Panel -->
            <div class="powerups-panel">
                <div class="powerup-btn" id="skipPowerup" onclick="usePowerup('skip')" title="Skip Question">
                    <span>‚è≠Ô∏è</span>
                    <div class="powerup-count" id="skipCount">1</div>
                    <div class="powerup-label">Skip</div>
                </div>
                <div class="powerup-btn" id="fiftyFiftyPowerup" onclick="usePowerup('5050')" title="50:50 - Remove 2 wrong answers">
                    <span>üéØ</span>
                    <div class="powerup-count" id="fiftyFiftyCount">1</div>
                    <div class="powerup-label">50:50</div>
                </div>
                <div class="powerup-btn" id="freezeTimePowerup" onclick="usePowerup('freeze')" title="Freeze Timer (+10s)">
                    <span>‚è∏Ô∏è</span>
                    <div class="powerup-count" id="freezeCount">1</div>
                    <div class="powerup-label">+Time</div>
                </div>
            </div>
        </div>
        
        <!-- Combo Display -->
        <div class="combo-display" id="comboDisplay">
            <div class="combo-title">COMBO!</div>
            <div class="combo-value" id="comboValue">0</div>
            <div class="combo-multiplier">√ó<span id="comboMultiplier">1.0</span></div>
        </div>
        
        <!-- Achievement Popup -->
        <div class="achievement-popup" id="achievementPopup">
            <div class="achievement-header">
                <div class="achievement-icon" id="achievementIcon">üèÜ</div>
                <div class="achievement-text">
                    <h3 id="achievementTitle">Achievement Unlocked!</h3>
                    <p id="achievementDesc">First Question Correct!</p>
                </div>
            </div>
        </div>
        
        <!-- Result Screen -->
        <div class="result-screen" id="resultScreen">
            <div class="result-card">
                <div class="result-content">
                    <div class="result-badge" id="resultBadge">üèÜ</div>
                    <div class="iq-score" id="iqScore">0</div>
                    <div class="iq-label">TRADER IQ SCORE</div>
                    <div class="result-title" id="resultTitle">Trading Genius!</div>
                    <div class="result-description" id="resultDescription">
                        You have exceptional market knowledge! Your understanding of trading concepts puts you in the top tier of traders.
                    </div>
                    
                    <div class="result-stats">
                        <div class="result-stat">
                            <div class="result-stat-value green" id="correctCount">0</div>
                            <div class="result-stat-label">Correct</div>
                        </div>
                        <div class="result-stat">
                            <div class="result-stat-value gold" id="avgTime">0s</div>
                            <div class="result-stat-label">Avg Time</div>
                        </div>
                        <div class="result-stat">
                            <div class="result-stat-value blue" id="streakCount">0</div>
                            <div class="result-stat-label">Best Streak</div>
                        </div>
                        <div class="result-stat">
                            <div class="result-stat-value" style="color: var(--primary);" id="userRank">#1</div>
                            <div class="result-stat-label">Your Rank</div>
                        </div>
                    </div>
                    
                    <div class="percentile-bar">
                        <div class="percentile-label">
                            <span>Beginner</span>
                            <span>Average</span>
                            <span>Genius</span>
                        </div>
                        <div class="percentile-track">
                            <div class="percentile-fill" id="percentileFill" style="width: 0%"></div>
                            <div class="percentile-marker" id="percentileMarker" style="left: 0%;">You</div>
                        </div>
                    </div>
                    
                    <div class="share-buttons">
                        <button class="share-btn twitter" onclick="shareTwitterResult()">
                            <i class="fab fa-twitter"></i> Share on X
                        </button>
                        <button class="share-btn whatsapp" onclick="shareWhatsAppResult()">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </button>
                        <button class="share-btn retry" onclick="retryQuiz()">
                            <i class="fas fa-redo"></i> Try Again
                        </button>
                    </div>
                    
                    <div class="watermark">brobillionaire.com</div>
                </div>
            </div>
            
            <div class="leaderboard-preview">
                <div class="leaderboard-title">
                    <i class="fas fa-trophy"></i> Leaderboards
                </div>
                
                <div class="leaderboard-tabs">
                    <button class="leaderboard-tab active" onclick="switchLeaderboard('overall')">
                        üèÜ All Time
                    </button>
                    <button class="leaderboard-tab" onclick="switchLeaderboard('monthly')">
                        üìÖ This Month
                    </button>
                    <button class="leaderboard-tab" onclick="switchLeaderboard('weekly')">
                        üìÜ This Week
                    </button>
                    <button class="leaderboard-tab" onclick="switchLeaderboard('daily')">
                        ‚ö° Today
                    </button>
                </div>
                
                <div class="leaderboard-content active" id="leaderboard-overall">
                    <!-- Overall leaderboard -->
                </div>
                <div class="leaderboard-content" id="leaderboard-monthly">
                    <!-- Monthly leaderboard -->
                </div>
                <div class="leaderboard-content" id="leaderboard-weekly">
                    <!-- Weekly leaderboard -->
                </div>
                <div class="leaderboard-content" id="leaderboard-daily">
                    <!-- Daily leaderboard -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="confetti" id="confetti"></div>
    
    <!-- Name Input Modal -->
    <div class="name-modal" id="nameModal">
        <div class="name-content">
            <h2>üéØ Join the Leaderboard!</h2>
            <p>Enter your name to compete with other traders</p>
            
            <div class="profile-pic-upload">
                <div class="profile-preview" id="profilePreview" onclick="document.getElementById('profileInput').click()">
                    <i class="fas fa-user"></i>
                </div>
                <input type="file" id="profileInput" accept="image/*" onchange="handleProfileUpload(event)">
                <label for="profileInput" class="profile-upload-btn">Add Photo (Optional)</label>
            </div>
            
            <input 
                type="text" 
                class="name-input" 
                id="nameInput" 
                placeholder="Enter your name or @username" 
                maxlength="20"
            >
            
            <button class="cta-btn" onclick="saveNameAndStart()">Start Challenge <i class="fas fa-arrow-right"></i></button>
        </div>
    </div>
    
    <script>
        // User Data
        let userName = '';
        let userAvatar = '';
        
        // Game State
        let currentQuestion = 0;
        let score = 0;
        let streak = 0;
        let maxStreak = 0;
        let totalTime = 0;
        let answeredQuestions = 0;
        let timer;
        let timeLeft;
        let difficulty = 'beginner';
        let shuffledQuestions = [];
        let comboMultiplier = 1.0;
        
        // Power-ups
        let powerups = {
            skip: 1,
            fiftyFifty: 1,
            freeze: 1
        };
        
        // Achievements
        const achievements = {
            firstCorrect: { icon: 'üéØ', title: 'First Blood', desc: 'Got your first answer correct!', unlocked: false },
            streak3: { icon: 'üî•', title: 'Hot Streak', desc: '3 correct answers in a row!', unlocked: false },
            streak5: { icon: '‚ö°', title: 'On Fire', desc: '5 correct answers in a row!', unlocked: false },
            perfectScore: { icon: 'üíØ', title: 'Perfect Score', desc: 'Got all 15 questions correct!', unlocked: false },
            speedDemon: { icon: 'üöÄ', title: 'Speed Demon', desc: 'Averaged under 10 seconds per answer!', unlocked: false },
            comboMaster: { icon: 'üéä', title: 'Combo Master', desc: 'Reached 3x combo multiplier!', unlocked: false }
        };
        
        const timePerDifficulty = {
            beginner: 30,
            pro: 20,
            legend: 15
        };
        
        // Leaderboard Management with time periods
        function getTimestamp() {
            const now = new Date();
            return {
                date: now.toISOString(),
                day: now.toISOString().split('T')[0],
                week: getWeekNumber(now),
                month: `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}`
            };
        }
        
        function getWeekNumber(date) {
            const firstDay = new Date(date.getFullYear(), 0, 1);
            const days = Math.floor((date - firstDay) / (24 * 60 * 60 * 1000));
            return Math.ceil((days + firstDay.getDay() + 1) / 7);
        }
        
        function loadLeaderboard(period = 'overall') {
            const leaderboard = JSON.parse(localStorage.getItem('traderIQLeaderboard') || '[]');
            const timestamp = getTimestamp();
            
            let filtered = leaderboard;
            
            if (period === 'daily') {
                filtered = leaderboard.filter(entry => entry.day === timestamp.day);
            } else if (period === 'weekly') {
                filtered = leaderboard.filter(entry => entry.week === timestamp.week);
            } else if (period === 'monthly') {
                filtered = leaderboard.filter(entry => entry.month === timestamp.month);
            }
            
            return filtered.sort((a, b) => b.score - a.score).slice(0, 100);
        }
        
        function saveToLeaderboard(name, score, avatar) {
            const leaderboard = JSON.parse(localStorage.getItem('traderIQLeaderboard') || '[]');
            const timestamp = getTimestamp();
            
            leaderboard.push({
                name: name,
                score: score,
                avatar: avatar || '',
                date: timestamp.date,
                day: timestamp.day,
                week: timestamp.week,
                month: timestamp.month
            });
            
            localStorage.setItem('traderIQLeaderboard', JSON.stringify(leaderboard));
            updateAllLeaderboards();
        }
        
        function updateAllLeaderboards() {
            updateLeaderboardDisplay('overall');
            updateLeaderboardDisplay('monthly');
            updateLeaderboardDisplay('weekly');
            updateLeaderboardDisplay('daily');
            updateTotalPlayers();
        }
        
        function updateTotalPlayers() {
            const leaderboard = JSON.parse(localStorage.getItem('traderIQLeaderboard') || '[]');
            const uniquePlayers = new Set(leaderboard.map(e => e.name)).size;
            const totalPlayersEl = document.getElementById('totalPlayersHome');
            if (totalPlayersEl) {
                totalPlayersEl.textContent = uniquePlayers || '0';
            }
        }
        
        function updateLeaderboardDisplay(period) {
            const leaderboard = loadLeaderboard(period);
            const container = document.getElementById(`leaderboard-${period}`);
            
            if (!container) return;
            
            if (leaderboard.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No scores yet. Be the first!</div>';
                return;
            }
            
            container.innerHTML = leaderboard.slice(0, 10).map((entry, index) => {
                const rankClass = index === 0 ? 'gold' : '';
                const avatarHTML = entry.avatar 
                    ? `<img src="${entry.avatar}" alt="${entry.name}">`
                    : `<i class="fas fa-user"></i>`;
                
                let medal = '';
                if (index === 0) medal = 'ü•á';
                else if (index === 1) medal = 'ü•à';
                else if (index === 2) medal = 'ü•â';
                
                return `
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank ${rankClass}">${medal || (index + 1)}</div>
                        <div class="leaderboard-avatar">${avatarHTML}</div>
                        <div class="leaderboard-name">${entry.name}</div>
                        <div class="leaderboard-score">${entry.score}</div>
                    </div>
                `;
            }).join('');
        }
        
        function switchLeaderboard(period) {
            // Update tabs
            document.querySelectorAll('.leaderboard-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update content
            document.querySelectorAll('.leaderboard-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`leaderboard-${period}`).classList.add('active');
        }
        
        function getUserRank(name, score, period = 'overall') {
            const leaderboard = loadLeaderboard(period);
            const rank = leaderboard.findIndex(entry => 
                entry.name === name && entry.score === score
            ) + 1;
            
            return {
                rank: rank || leaderboard.length + 1,
                total: leaderboard.length
            };
        }
        
        // Profile Picture Upload
        function handleProfileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (file.size > 2 * 1024 * 1024) {
                alert('Image size must be less than 2MB');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (e) => {
                userAvatar = e.target.result;
                document.getElementById('profilePreview').innerHTML = `<img src="${userAvatar}" alt="Profile">`;
            };
            reader.readAsDataURL(file);
        }
        
        // Save Name and Start Quiz
        function saveNameAndStart() {
            const name = document.getElementById('nameInput').value.trim();
            
            if (!name) {
                alert('Please enter your name to continue!');
                return;
            }
            
            userName = name;
            document.getElementById('nameModal').classList.remove('active');
            actualStartQuiz();
        }
        
        // Achievement System
        function showAchievement(achievementKey) {
            if (achievements[achievementKey].unlocked) return;
            
            achievements[achievementKey].unlocked = true;
            const achievement = achievements[achievementKey];
            
            document.getElementById('achievementIcon').textContent = achievement.icon;
            document.getElementById('achievementTitle').textContent = achievement.title;
            document.getElementById('achievementDesc').textContent = achievement.desc;
            
            const popup = document.getElementById('achievementPopup');
            popup.classList.add('show');
            
            // Play sound effect (optional)
            playSound('achievement');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }
        
        // Sound Effects (silent if not needed)
        function playSound(type) {
            // Optional: Add sound effects here
            // Example: new Audio('sounds/' + type + '.mp3').play();
        }
        
        // Power-ups
        function usePowerup(type) {
            if (powerups[type] <= 0) return;
            
            powerups[type]--;
            updatePowerupDisplay(type);
            
            if (type === 'skip') {
                nextQuestion();
            } else if (type === '5050') {
                fiftyFifty();
            } else if (type === 'freeze') {
                freezeTime();
            }
            
            playSound('powerup');
        }
        
        function updatePowerupDisplay(type) {
            const countMap = {
                skip: 'skipCount',
                '5050': 'fiftyFiftyCount',
                freeze: 'freezeCount'
            };
            
            const btnMap = {
                skip: 'skipPowerup',
                '5050': 'fiftyFiftyPowerup',
                freeze: 'freezeTimePowerup'
            };
            
            document.getElementById(countMap[type]).textContent = powerups[type];
            
            if (powerups[type] <= 0) {
                document.getElementById(btnMap[type]).classList.add('disabled');
            }
        }
        
        function fiftyFifty() {
            const q = shuffledQuestions[currentQuestion];
            const options = document.querySelectorAll('.option-btn');
            let wrongRemoved = 0;
            
            options.forEach(opt => {
                const index = parseInt(opt.dataset.index);
                if (index !== q.correct && wrongRemoved < 2 && !opt.classList.contains('disabled')) {
                    opt.style.opacity = '0.3';
                    opt.style.pointerEvents = 'none';
                    wrongRemoved++;
                }
            });
        }
        
        function freezeTime() {
            timeLeft += 10;
            document.getElementById('timerValue').textContent = timeLeft;
            createScoreParticle('+10s', 'var(--primary)');
        }
        
        // Combo System
        function updateCombo() {
            if (streak >= 3) {
                comboMultiplier = 1.0 + (streak - 2) * 0.5;
                document.getElementById('comboValue').textContent = streak;
                document.getElementById('comboMultiplier').textContent = comboMultiplier.toFixed(1);
                document.getElementById('comboDisplay').classList.add('active');
                
                if (streak === 3) showAchievement('streak3');
                if (streak === 5) showAchievement('streak5');
                if (comboMultiplier >= 3.0) showAchievement('comboMaster');
            } else {
                comboMultiplier = 1.0;
                document.getElementById('comboDisplay').classList.remove('active');
            }
        }
        
        // Score Particles
        function createScoreParticle(text, color) {
            const particle = document.createElement('div');
            particle.className = 'score-particle';
            particle.textContent = text;
            particle.style.color = color;
            particle.style.left = '50%';
            particle.style.top = '50%';
            document.body.appendChild(particle);
            
            setTimeout(() => particle.remove(), 1000);
        }
        
        // Initialize leaderboard on page load
        window.addEventListener('DOMContentLoaded', () => {
            updateAllLeaderboards();
        });
        
        // Questions Database
        const questions = [
            {
                category: "Options Trading",
                question: "What does 'ITM' stand in options trading?",
                options: ["In The Market", "In The Money", "Into The Movement", "Immediate Trade Mode"],
                correct: 1,
                explanation: "ITM (In The Money) means the option has intrinsic value. For calls, it's when strike price < current price. For puts, it's when strike price > current price."
            },
            {
                category: "Technical Analysis",
                question: "Which candlestick pattern signals a potential bullish reversal?",
                options: ["Shooting Star", "Hammer", "Evening Star", "Bearish Engulfing"],
                correct: 1,
                explanation: "A Hammer forms at the bottom of a downtrend with a small body and long lower wick, indicating buyers stepped in to push prices up from lows."
            },
            {
                category: "Risk Management",
                question: "What is the recommended maximum risk per trade for most traders?",
                options: ["5-10%", "1-2%", "10-15%", "No limit if confident"],
                correct: 1,
                explanation: "Professional traders typically risk 1-2% per trade. This ensures you can survive a losing streak and protects your capital for future opportunities."
            },
            {
                category: "Market Mechanics",
                question: "What is 'Theta' in options Greeks?",
                options: ["Price sensitivity", "Time decay", "Volatility impact", "Interest rate sensitivity"],
                correct: 1,
                explanation: "Theta measures time decay - how much an option's value decreases each day. It's particularly important for option sellers who profit from this decay."
            },
            {
                category: "Legendary Traders",
                question: "Who is known as 'The Man Who Broke the Bank of England'?",
                options: ["Warren Buffett", "George Soros", "Paul Tudor Jones", "Ray Dalio"],
                correct: 1,
                explanation: "George Soros made $1 billion by shorting the British Pound in 1992 during Black Wednesday, forcing the UK to withdraw from the European Exchange Rate Mechanism."
            },
            {
                category: "Market Events",
                question: "What was the Dow Jones's percentage drop on Black Monday 1987?",
                options: ["12%", "22%", "15%", "8%"],
                correct: 1,
                explanation: "On October 19, 1987, the Dow Jones dropped 22.6% in a single day - the largest one-day percentage decline in stock market history."
            },
            {
                category: "Options Trading",
                question: "What is a 'Gamma Squeeze'?",
                options: ["When options expire worthless", "Forced buying by market makers to hedge", "A type of spread strategy", "Selling options at high premiums"],
                correct: 1,
                explanation: "A gamma squeeze occurs when market makers must buy the underlying stock to hedge their short call positions as prices rise, creating a feedback loop that accelerates price increases."
            },
            {
                category: "Technical Analysis",
                question: "What does RSI above 70 typically indicate?",
                options: ["Oversold conditions", "Neutral market", "Overbought conditions", "Trend continuation"],
                correct: 2,
                explanation: "RSI (Relative Strength Index) above 70 indicates overbought conditions, suggesting the asset may be due for a pullback. Below 30 indicates oversold conditions."
            },
            {
                category: "Trading Psychology",
                question: "What is 'FOMO' in trading context?",
                options: ["First Option Money Order", "Fear Of Missing Out", "Future Options Market Order", "Fixed Order Matching Order"],
                correct: 1,
                explanation: "FOMO (Fear Of Missing Out) is a psychological bias where traders enter positions impulsively because they fear missing a profitable move, often leading to poor timing."
            },
            {
                category: "Market Structure",
                question: "What is the standard lot size for Bank Nifty options in India?",
                options: ["25 units", "15 units", "50 units", "75 units"],
                correct: 1,
                explanation: "Bank Nifty options have a lot size of 15 units (as of recent SEBI regulations). Nifty 50 options have a lot size of 25 units."
            },
            {
                category: "Options Trading",
                question: "What is 'IV Crush'?",
                options: ["When implied volatility drops sharply after an event", "When volume increases rapidly", "When options become worthless", "When margin requirements increase"],
                correct: 0,
                explanation: "IV Crush happens when implied volatility drops significantly after an anticipated event (like earnings). Option premiums collapse even if the stock moves in your direction."
            },
            {
                category: "Risk Management",
                question: "What is a 'Stop Loss'?",
                options: ["Maximum profit target", "Order to limit losses at predetermined price", "Daily trading limit", "Type of options order"],
                correct: 1,
                explanation: "A stop loss is an order to sell when price reaches a specified level, limiting your maximum loss. It's a fundamental risk management tool every trader should use."
            },
            {
                category: "Market Mechanics",
                question: "What happens during a 'Short Squeeze'?",
                options: ["Prices fall rapidly", "Short sellers forced to buy, pushing prices higher", "Options expire", "Volume decreases"],
                correct: 1,
                explanation: "A short squeeze occurs when heavily shorted stocks rise, forcing short sellers to buy shares to cover their positions, which further accelerates the price increase."
            },
            {
                category: "Legendary Traders",
                question: "Who founded Renaissance Technologies and the Medallion Fund?",
                options: ["Ray Dalio", "Jim Simons", "Ken Griffin", "Steve Cohen"],
                correct: 1,
                explanation: "Jim Simons, a mathematician, founded Renaissance Technologies. The Medallion Fund has averaged 66% returns before fees since 1988 - the best track record in history."
            },
            {
                category: "Trading Books",
                question: "Who wrote 'Trading in the Zone'?",
                options: ["Mark Douglas", "Jack Schwager", "Van Tharp", "Jesse Livermore"],
                correct: 0,
                explanation: "Mark Douglas wrote 'Trading in the Zone', a classic book on trading psychology that focuses on developing the proper mindset for consistent trading success."
            },
            {
                category: "Options Trading",
                question: "What is a 'Straddle' strategy?",
                options: ["Buying calls only", "Buying both call and put at same strike", "Selling options only", "Buying multiple strikes"],
                correct: 1,
                explanation: "A straddle involves buying both a call and put option at the same strike price, profiting from significant price movement in either direction."
            },
            {
                category: "Market Psychology",
                question: "What is 'Confirmation Bias' in trading?",
                options: ["Getting trade confirmations", "Seeking info that supports your view", "Confirming stop losses", "Broker confirmation"],
                correct: 1,
                explanation: "Confirmation bias is the tendency to seek and interpret information that confirms your existing beliefs while ignoring contradictory evidence."
            },
            {
                category: "Technical Indicators",
                question: "What does MACD stand for?",
                options: ["Moving Average Calculation Data", "Moving Average Convergence Divergence", "Market Analysis Calculation Device", "Multiple Asset Correlation Display"],
                correct: 1,
                explanation: "MACD (Moving Average Convergence Divergence) is a trend-following momentum indicator that shows the relationship between two moving averages."
            },
            {
                category: "Market Orders",
                question: "What is a 'Limit Order'?",
                options: ["Order with daily limit", "Order to buy/sell at specific price or better", "Maximum order size", "Time-limited order"],
                correct: 1,
                explanation: "A limit order specifies the maximum price you're willing to pay when buying, or minimum price when selling. It guarantees price but not execution."
            },
            {
                category: "Options Greeks",
                question: "What does 'Delta' measure in options?",
                options: ["Time decay", "Price change sensitivity", "Volatility impact", "Interest rate effect"],
                correct: 1,
                explanation: "Delta measures how much an option's price changes for every $1 movement in the underlying asset. Ranges from 0 to 1 for calls, 0 to -1 for puts."
            }
        ];
        
        function selectDifficulty(el) {
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('selected'));
            el.classList.add('selected');
            difficulty = el.dataset.difficulty;
        }
        
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function startQuiz() {
            document.getElementById('nameModal').classList.add('active');
        }
        
        function actualStartQuiz() {
            // Reset everything
            shuffledQuestions = shuffleArray(questions).slice(0, 15);
            currentQuestion = 0;
            score = 0;
            streak = 0;
            maxStreak = 0;
            totalTime = 0;
            answeredQuestions = 0;
            comboMultiplier = 1.0;
            
            // Reset power-ups
            powerups = { skip: 1, fiftyFifty: 1, freeze: 1 };
            updatePowerupDisplay('skip');
            updatePowerupDisplay('5050');
            updatePowerupDisplay('freeze');
            document.querySelectorAll('.powerup-btn').forEach(btn => btn.classList.remove('disabled'));
            
            // Reset achievements
            Object.keys(achievements).forEach(key => achievements[key].unlocked = false);
            
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('quizScreen').style.display = 'block';
            document.getElementById('scoreDisplay').innerHTML = '<i class="fas fa-star"></i> 0';
            
            showQuestion();
        }
        
        function showQuestion() {
            const q = shuffledQuestions[currentQuestion];
            
            document.getElementById('questionCounter').textContent = `Q${currentQuestion + 1}/15`;
            document.getElementById('progressFill').style.width = ((currentQuestion + 1) / 15 * 100) + '%';
            document.getElementById('questionCategory').textContent = q.category;
            document.getElementById('questionText').textContent = q.question;
            
            const letters = ['A', 'B', 'C', 'D'];
            const optionsHtml = q.options.map((opt, i) => `
                <button class="option-btn fade-in" onclick="selectAnswer(${i})" data-index="${i}">
                    <div class="option-letter">${letters[i]}</div>
                    <div>${opt}</div>
                </button>
            `).join('');
            
            document.getElementById('optionsGrid').innerHTML = optionsHtml;
            document.getElementById('explanationBox').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            
            startTimer();
        }
        
        function startTimer() {
            timeLeft = timePerDifficulty[difficulty];
            const timerEl = document.getElementById('timer');
            const timerValue = document.getElementById('timerValue');
            
            timerEl.className = 'timer';
            timerValue.textContent = timeLeft;
            
            timer = setInterval(() => {
                timeLeft--;
                timerValue.textContent = timeLeft;
                
                if (timeLeft <= 10 && timeLeft > 5) {
                    timerEl.className = 'timer warning';
                } else if (timeLeft <= 5) {
                    timerEl.className = 'timer danger';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timeUp();
                }
            }, 1000);
        }
        
        function timeUp() {
            const q = shuffledQuestions[currentQuestion];
            const options = document.querySelectorAll('.option-btn');
            
            options.forEach(opt => {
                opt.classList.add('disabled');
                if (parseInt(opt.dataset.index) === q.correct) {
                    opt.classList.add('correct');
                }
            });
            
            streak = 0;
            comboMultiplier = 1.0;
            document.getElementById('comboDisplay').classList.remove('active');
            totalTime += timePerDifficulty[difficulty];
            answeredQuestions++;
            
            document.getElementById('explanationText').textContent = q.explanation;
            document.getElementById('explanationBox').style.display = 'block';
            document.getElementById('nextBtn').style.display = 'block';
            
            // Shake effect
            document.querySelector('.question-card').classList.add('shake');
            setTimeout(() => document.querySelector('.question-card').classList.remove('shake'), 500);
        }
        
        function selectAnswer(index) {
            clearInterval(timer);
            
            const q = shuffledQuestions[currentQuestion];
            const options = document.querySelectorAll('.option-btn');
            const timeTaken = timePerDifficulty[difficulty] - timeLeft;
            
            totalTime += timeTaken;
            answeredQuestions++;
            
            options.forEach(opt => {
                opt.classList.add('disabled');
                const optIndex = parseInt(opt.dataset.index);
                if (optIndex === q.correct) {
                    opt.classList.add('correct');
                } else if (optIndex === index && index !== q.correct) {
                    opt.classList.add('wrong');
                }
            });
            
            if (index === q.correct) {
                score++;
                streak++;
                if (streak > maxStreak) maxStreak = streak;
                
                // Update combo
                updateCombo();
                
                // Calculate points with combo multiplier
                const basePoints = 10;
                const timeBonus = Math.max(0, Math.floor((timeLeft / timePerDifficulty[difficulty]) * 5));
                const comboBonus = Math.floor(basePoints * (comboMultiplier - 1));
                const totalPoints = Math.floor((basePoints + timeBonus + comboBonus) * comboMultiplier);
                
                document.getElementById('scoreDisplay').innerHTML = `<i class="fas fa-star"></i> ${score * 10 + totalPoints}`;
                
                // Show score particle
                createScoreParticle(`+${totalPoints}`, 'var(--correct)');
                
                // Achievements
                if (score === 1) showAchievement('firstCorrect');
                
                playSound('correct');
            } else {
                streak = 0;
                comboMultiplier = 1.0;
                document.getElementById('comboDisplay').classList.remove('active');
                playSound('wrong');
                
                // Shake effect
                document.querySelector('.question-card').classList.add('shake');
                setTimeout(() => document.querySelector('.question-card').classList.remove('shake'), 500);
            }
            
            document.getElementById('explanationText').textContent = q.explanation;
            document.getElementById('explanationBox').style.display = 'block';
            document.getElementById('nextBtn').style.display = 'block';
        }
        
        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion >= shuffledQuestions.length) {
                showResult();
            } else {
                showQuestion();
            }
        }
        
        function calculateIQ() {
            const baseIQ = 100;
            const correctBonus = (score / 15) * 50;
            const speedBonus = Math.max(0, 15 - (totalTime / answeredQuestions)) * 1.5;
            const streakBonus = maxStreak * 2;
            const difficultyMultiplier = difficulty === 'legend' ? 1.2 : difficulty === 'pro' ? 1.1 : 1;
            
            return Math.round((baseIQ + correctBonus + speedBonus + streakBonus) * difficultyMultiplier);
        }
        
        function showResult() {
            document.getElementById('quizScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            
            const iq = calculateIQ();
            const avgTime = (totalTime / answeredQuestions).toFixed(1);
            const percentile = Math.min(99, Math.round((iq - 80) / 80 * 100));
            
            // Check achievements
            if (score === 15) showAchievement('perfectScore');
            if (avgTime < 10) showAchievement('speedDemon');
            
            // Save to leaderboard
            saveToLeaderboard(userName, iq, userAvatar);
            
            // Get user's rank
            const rankData = getUserRank(userName, iq);
            
            document.getElementById('iqScore').textContent = iq;
            document.getElementById('correctCount').textContent = score;
            document.getElementById('avgTime').textContent = avgTime + 's';
            document.getElementById('streakCount').textContent = maxStreak;
            
            if (document.getElementById('userRank')) {
                document.getElementById('userRank').textContent = `#${rankData.rank}`;
            }
            
            // Set result based on score
            let badge, title, description;
            if (iq >= 150) {
                badge = 'üèÜ';
                title = 'Trading Genius!';
                description = 'Exceptional! Your market knowledge rivals the legends. You understand trading at an elite level.';
            } else if (iq >= 130) {
                badge = 'ü•á';
                title = 'Master Trader';
                description = 'Impressive! You have deep knowledge of markets and trading concepts. Keep learning!';
            } else if (iq >= 115) {
                badge = 'ü•à';
                title = 'Skilled Trader';
                description = 'Good job! You have solid fundamentals. Focus on advanced concepts to level up.';
            } else if (iq >= 100) {
                badge = 'ü•â';
                title = 'Developing Trader';
                description = 'You\'re on the right path! Keep studying and practicing to improve your trading IQ.';
            } else {
                badge = 'üìö';
                title = 'Learning Trader';
                description = 'Every expert was once a beginner. Check out our articles to boost your trading knowledge!';
            }
            
            document.getElementById('resultBadge').textContent = badge;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultDescription').textContent = description;
            document.getElementById('percentileMarker').style.left = percentile + '%';
            
            // Animate percentile
            setTimeout(() => {
                document.getElementById('percentileFill').style.width = percentile + '%';
            }, 300);
            
            // Confetti for high scores
            if (iq >= 130) {
                createConfetti();
            }
        }
        
        function createConfetti() {
            const container = document.getElementById('confetti');
            const colors = ['#C9A227', '#22c55e', '#3b82f6', '#a855f7', '#ef4444'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti-piece';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.animationDuration = (3 + Math.random() * 2) + 's';
                container.appendChild(confetti);
            }
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }
        
        function shareTwitterResult() {
            const iq = calculateIQ();
            const rankData = getUserRank(userName, iq);
            const text = `üß† My Trader IQ Score: ${iq}\n\n‚úÖ ${score}/15 Correct\nüî• ${maxStreak} Best Streak\nüèÜ Rank #${rankData.rank} of ${rankData.total}\n\nCan you beat me? Take the challenge üëá\n\n`;
            const url = 'https://brobillionaire.com/trader-iq-challenge.html';
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }
        
        function shareWhatsAppResult() {
            const iq = calculateIQ();
            const rankData = getUserRank(userName, iq);
            const text = `üß† *My Trader IQ Score: ${iq}*\n\n‚úÖ ${score}/15 Correct\nüî• ${maxStreak} Best Streak\nüèÜ Rank #${rankData.rank} of ${rankData.total}\n\nCan you beat me? Take the challenge: https://brobillionaire.com/trader-iq-challenge.html`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }
        
        function retryQuiz() {
            userName = '';
            userAvatar = '';
            document.getElementById('nameInput').value = '';
            document.getElementById('profilePreview').innerHTML = '<i class="fas fa-user"></i>';
            
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
        }
    </script>
<script src="common-footer.js" defer></script>
</body>
</html>
