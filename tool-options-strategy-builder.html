<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N0Y2LBMRSW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-N0Y2LBMRSW');
    </script>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Options Strategy Builder - Free Options Trading Calculator & Payoff Visualizer | BroBillionaire</title>
    
    <!-- Primary Meta Tags - Optimized for "option strategy builder" ranking -->
    <meta name="title" content="Options Strategy Builder - Free Options Trading Calculator & Payoff Visualizer">
    <meta name="description" content="Best free options strategy builder tool. Build, visualize & analyze options strategies instantly. Calculate profit/loss, breakeven, Greeks. Pre-built strategies: Iron Condor, Butterfly, Straddle, Strangle, Spreads. Real-time payoff diagrams for options trading in India & worldwide.">
    <meta name="keywords" content="option strategy builder, options strategy builder, free options strategy builder, options calculator, options payoff calculator, options profit calculator, iron condor calculator, butterfly spread calculator, straddle calculator, strangle calculator, options trading tool, options payoff diagram, options strategy calculator, vertical spread calculator, call spread calculator, put spread calculator, options Greeks calculator, options risk calculator, covered call calculator, protective put calculator, bull call spread, bear put spread, options trading calculator India, Bank Nifty options calculator, Nifty options strategy, options chain analyzer, options visualizer, options trading strategies, option payoff graph, best options calculator, free trading tools">
    <meta name="author" content="BroBillionaire">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="bingbot" content="index, follow">
    <meta name="revisit-after" content="1 days">
    <meta name="rating" content="General">
    <meta name="distribution" content="Global">
    <meta name="language" content="English">
    <meta name="geo.region" content="IN">
    <meta name="geo.placename" content="India">
    <meta name="content-language" content="en">
    <link rel="canonical" href="https://brobillionaire.com/tool-options-strategy-builder.html">
    
    <!-- Open Graph / Facebook - Enhanced -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://brobillionaire.com/tool-options-strategy-builder.html">
    <meta property="og:title" content="Options Strategy Builder - Free Options Trading Calculator & Payoff Visualizer">
    <meta property="og:description" content="Best free options strategy builder. Build Iron Condor, Butterfly, Straddle, Strangle & more. Instant payoff diagrams, profit/loss calculations, breakeven analysis.">
    <meta property="og:image" content="https://brobillionaire.com/og-image.jpg">
    <meta property="og:image:secure_url" content="https://brobillionaire.com/og-image.jpg">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Options Strategy Builder Tool - BroBillionaire">
    <meta property="og:site_name" content="BroBillionaire">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="en_IN">
    
    <!-- Twitter Card - Enhanced -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://brobillionaire.com/tool-options-strategy-builder.html">
    <!-- Schema.org WebApplication Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "@id": "https://brobillionaire.com/tool-options-strategy-builder.html",
        "name": "Options Strategy Builder",
        "alternativeName": "Free Options Trading Calculator",
        "url": "https://brobillionaire.com/tool-options-strategy-builder.html",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "softwareVersion": "2.0",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock"
        },
        "description": "Professional options strategy builder tool to create, visualize and analyze options trading strategies. Calculate profit/loss, breakeven points, and risk metrics for complex options strategies including Iron Condor, Butterfly, Straddle, Strangle, and all types of spreads.",
        "featureList": [
            "Options Payoff Diagram Visualization",
            "Iron Condor Calculator",
            "Butterfly Spread Calculator",
            "Straddle and Strangle Calculator",
            "Bull Call Spread Calculator",
            "Bear Put Spread Calculator",
            "Covered Call Calculator",
            "Protective Put Calculator",
            "Breakeven Point Calculator",
            "Max Profit and Loss Calculator",
            "Risk/Reward Ratio Analysis",
            "Multi-Leg Options Strategy Support",
            "Real-time Payoff Curves",
            "Options Premium Calculator"
        ],
        "screenshot": "https://brobillionaire.com/og-image.jpg",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "ratingCount": "2847",
            "bestRating": "5",
            "worstRating": "1"
        },
        "author": {
            "@type": "Organization",
            "name": "BroBillionaire",
            "url": "https://brobillionaire.com",
            "logo": {
                "@type": "ImageObject",
                "url": "https://brobillionaire.com/logo.jpg"
            }
        },
        "publisher": {
            "@type": "Organization",
            "name": "BroBillionaire",
            "logo": {
                "@type": "ImageObject",
                "url": "https://brobillionaire.com/logo.jpg"
            }
        },
        "datePublished": "2024-01-15",
        "dateModified": "2026-02-03",
        "inLanguage": "en-US"
    }
    </script>
    
    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://brobillionaire.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Trading Tools",
                "item": "https://brobillionaire.com/tools.html"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Options Strategy Builder"
            }
        ]
    }
    </script>
    
    <!-- HowTo Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to Build Options Trading Strategies",
        "description": "Step-by-step guide to build and analyze options trading strategies using the Options Strategy Builder tool",
        "step": [
            {
                "@type": "HowToStep",
                "name": "Choose a Strategy Template",
                "text": "Select from pre-built strategies like Iron Condor, Butterfly, Straddle, Strangle, or Spreads, or start building a custom strategy from scratch.",
                "position": 1
            },
            {
                "@type": "HowToStep",
                "name": "Add Option Legs",
                "text": "Click 'Add Option Leg' to add calls or puts. Configure each leg with Buy/Sell action, strike price, premium, and quantity.",
                "position": 2
            },
            {
                "@type": "HowToStep",
                "name": "Configure Strike Prices and Premiums",
                "text": "Enter the strike prices and premiums for each option leg based on current market prices or your analysis.",
                "position": 3
            },
            {
                "@type": "HowToStep",
                "name": "Calculate and Visualize",
                "text": "Click 'Calculate & Visualize' to see the payoff diagram, max profit, max loss, breakeven points, and risk/reward metrics.",
                "position": 4
            },
            {
                "@type": "HowToStep",
                "name": "Analyze Results",
                "text": "Review the payoff curve, profit/loss metrics, breakeven points, and strategy composition to make informed trading decisions.",
                "position": 5
            }
        ]
    }
    </script>
    
    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is an options strategy builder?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "An options strategy builder is a free online tool that allows traders to create, visualize, and analyze complex options trading strategies. It calculates profit/loss scenarios, breakeven points, max profit/loss, and displays interactive payoff diagrams for strategies like Iron Condor, Butterfly, Straddle, Strangle, and various spreads."
                }
            },
            {
                "@type": "Question",
                "name": "How do I use the options strategy builder?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "To use the options strategy builder: 1) Choose a pre-built strategy template or click 'Add Option Leg' to build custom strategies. 2) Configure each leg with Buy/Sell action, Call/Put type, strike price, premium, and quantity. 3) Click 'Calculate & Visualize' to see the payoff diagram and all metrics including max profit, max loss, breakeven points, and risk/reward ratio."
                }
            },
            {
                "@type": "Question",
                "name": "What options strategies can I build?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "You can build any options strategy including: Long/Short Call and Put, Bull Call Spread, Bear Put Spread, Iron Condor, Iron Butterfly, Long/Short Straddle, Long/Short Strangle, Butterfly Spread, Calendar Spread, Covered Call, Protective Put, Collar, Ratio Spread, and custom multi-leg strategies with unlimited combinations."
                }
            },
            {
                "@type": "Question",
                "name": "Is the options strategy builder free to use?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, the options strategy builder is 100% free to use. No registration, no subscription, no hidden fees. Build unlimited strategies, visualize payoff diagrams, and analyze profit/loss scenarios completely free."
                }
            },
            {
                "@type": "Question",
                "name": "Does the options calculator work for Indian markets?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, the options strategy builder works perfectly for Indian markets including Nifty Options and Bank Nifty Options. Enter strike prices in Indian Rupees (‚Çπ) and the calculator will provide accurate profit/loss calculations and payoff diagrams for NSE options trading."
                }
            },
            {
                "@type": "Question",
                "name": "What is an Iron Condor strategy?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "An Iron Condor is a neutral options strategy with limited risk and limited profit. It involves selling an out-of-the-money put spread and an out-of-the-money call spread simultaneously. Use the Iron Condor calculator template to quickly build and analyze this strategy with visual payoff diagrams."
                }
            },
            {
                "@type": "Question",
                "name": "How accurate is the options profit calculator?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The options profit calculator provides mathematically accurate calculations based on the strike prices and premiums you enter. It calculates exact profit/loss at expiration for any underlying price. However, it shows intrinsic value at expiry and doesn't account for time decay, implied volatility changes, or early assignment during the trade."
                }
            },
            {
                "@type": "Question",
                "name": "Can I save my options strategies?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Currently, you can name your strategy and take screenshots of the payoff diagram and metrics. The strategy remains in your browser session. We recommend documenting important strategies or bookmarking the page to quickly rebuild strategies using the quick strategy templates."
                }
            }
        ]
    }
    </script>
    
    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "BroBillionaire",
        "url": "https://brobillionaire.com",
        "logo": "https://brobillionaire.com/logo.jpg",
        "description": "Free trading education and professional trading tools for stock market, options, futures, and forex traders worldwide.",
        "sameAs": [
            "https://twitter.com/brobillionaire"
        ]
    }
    </script>
    
    <meta name="twitter:title" content="Options Strategy Builder - Free Options Trading Calculator">
    <meta name="twitter:description" content="Best free options strategy builder. Build & visualize options strategies instantly. Iron Condor, Butterfly, Spreads & more.">
    <meta name="twitter:image" content="https://brobillionaire.com/og-image.jpg">
    <meta name="twitter:image:alt" content="Options Strategy Builder Tool">
    <meta name="twitter:site" content="@brobillionaire">
    <meta name="twitter:creator" content="@brobillionaire">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#C9A227">
    <meta name="msapplication-TileColor" content="#C9A227">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Options Strategy Builder">
    <meta name="application-name" content="Options Strategy Builder">
    <meta name="format-detection" content="telephone=no">
    <link rel="manifest" href="manifest.json">
    
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Page Layout */
        .strategy-builder-page {
            min-height: 100vh;
            padding: 80px 20px 60px;
            background: var(--bg-primary);
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-gold);
            color: var(--gold);
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            z-index: 100;
            text-decoration: none;
        }

        .back-btn:hover {
            background: var(--gold);
            color: var(--bg-primary);
            transform: translateX(-5px);
        }

        .strategy-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .strategy-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .strategy-header h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            margin-bottom: 15px;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .strategy-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Main Grid */
        .strategy-grid {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Control Panel */
        .control-panel {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 30px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .panel-section {
            margin-bottom: 30px;
        }

        .panel-section:last-child {
            margin-bottom: 0;
        }

        .panel-section h3 {
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Quick Strategies */
        .quick-strategies {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-strategy-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            padding: 12px;
            border-radius: 10px;
            font-size: 0.85rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quick-strategy-btn:hover {
            background: var(--bg-card-hover);
            border-color: var(--gold);
            color: var(--gold);
            transform: scale(1.02);
        }

        /* Leg Controls */
        .legs-container {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding-right: 5px;
        }

        .legs-container::-webkit-scrollbar {
            width: 6px;
        }

        .legs-container::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 3px;
        }

        .legs-container::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 3px;
        }

        .option-leg {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .leg-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .leg-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .leg-type-badge {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .leg-type-badge.buy {
            background: rgba(74, 222, 128, 0.2);
            color: var(--green);
        }

        .leg-type-badge.sell {
            background: rgba(239, 68, 68, 0.2);
            color: var(--red);
        }

        .remove-leg-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(239, 68, 68, 0.2);
            color: var(--red);
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .remove-leg-btn:hover {
            background: var(--red);
            color: white;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group:last-child {
            margin-bottom: 0;
        }

        .input-group label {
            display: block;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--gold);
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .add-leg-btn,
        .calculate-btn,
        .reset-btn {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            t!-- Breadcrumbs -->
            <nav aria-label="breadcrumb" style="margin-bottom: 30px;">
                <ol style="display: flex; gap: 8px; list-style: none; padding: 0; font-size: 0.85rem; color: var(--text-secondary); flex-wrap: wrap;">
                    <li><a href="index.html" style="color: var(--gold); text-decoration: none;">Home</a></li>
                    <li style="color: var(--text-tertiary);">/</li>
                    <li><a href="tools.html" style="color: var(--gold); text-decoration: none;">Trading Tools</a></li>
                    <li style="color: var(--text-tertiary);">/</li>
                    <li style="color: var(--text-primary);">Options Strategy Builder</li>
                </ol>
            </nav>

            <div class="strategy-header">
                <h1>‚ö° Options Strategy Builder - Free Options Trading Calculator</h1>
                <p>Build, visualize, and analyze any options strategy. Calculate profit/loss, breakeven points, and risk metrics in real-time. Perfect for Iron Condor, Butterfly, Straddle, Strangle, and all types of options spreads
            justify-content: center;
            gap: 8px;
        }

        .add-leg-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-gold);
            color: var(--gold);
        }

        .add-leg-btn:hover {
            background: rgba(201, 162, 39, 0.1);
            transform: scale(1.02);
        }

        .calculate-btn {
            background: var(--gold-gradient);
            border: none;
            color: var(--bg-primary);
        }

        .calculate-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(201, 162, 39, 0.3);
        }

        .reset-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .reset-btn:hover {
            border-color: var(--red);
            color: var(--red);
        }

        /* Visualization Panel */
        .visualization-panel {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 30px;
        }

        .viz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .viz-header h2 {
            font-size: 1.3rem;
            color: var(--text-primary);
        }

        .strategy-name-input {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            max-width: 200px;
        }

        .strategy-name-input:focus {
            outline: none;
            border-color: var(--gold);
        }

        /* Chart Canvas */
        .chart-container {
            background: var(--bg-tertiary);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            height: 500px;
        }

        #payoffChart {
            width: 100%;
            height: 100%;
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }


            <!-- SEO Content Section -->
            <div style="max-width: 1200px; margin: 60px auto 0; padding: 0 20px;">
                <article style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 20px; padding: 40px; margin-bottom: 30px;">
                    <h2 style="color: var(--gold); font-size: 1.8rem; margin-bottom: 20px;">Professional Options Strategy Builder & Calculator</h2>
                    
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px;">
                        Our <strong>free options strategy builder</strong> is the most comprehensive tool for options traders to create, visualize, and analyze complex options trading strategies. Whether you're trading <strong>Bank Nifty options</strong>, <strong>Nifty options</strong>, or any global options market, this calculator provides instant payoff diagrams and accurate profit/loss calculations.
                    </p>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">What is an Options Strategy Builder?</h3>
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px;">
                        An <strong>options strategy builder</strong> is a powerful financial calculator that allows traders to construct multi-leg options strategies and visualize their potential outcomes. It calculates key metrics including maximum profit, maximum loss, breakeven points, risk/reward ratios, and generates interactive payoff diagrams showing profit/loss across all possible underlying prices at expiration.
                    </p>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">Options Strategies You Can Build</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div style="background: var(--bg-tertiary); padding: 15px; border-radius: 10px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--gold); font-size: 1rem; margin-bottom: 8px;">üìà Basic Strategies</h4>
                            <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                                <li>Long Call & Long Put</li>
                                <li>Short Call & Short Put</li>
                                <li>Covered Call</li>
                                <li>Protective Put (Married Put)</li>
                            </ul>
                        </div>
                        <div style="background: var(--bg-tertiary); padding: 15px; border-radius: 10px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--gold); font-size: 1rem; margin-bottom: 8px;">üìä Spread Strategies</h4>
                            <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                                <li>Bull Call Spread</li>
                                <li>Bear Put Spread</li>
                                <li>Bull Put Spread</li>
                                <li>Bear Call Spread</li>
                            </ul>
                        </div>
                        <div style="background: var(--bg-tertiary); padding: 15px; border-radius: 10px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--gold); font-size: 1rem; margin-bottom: 8px;">ü¶ã Advanced Strategies</h4>
                            <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                                <li>Iron Condor</li>
                                <li>Iron Butterfly</li>
                                <li>Long/Short Butterfly</li>
                                <li>Calendar Spread</li>
                            </ul>
                        </div>
                        <div style="background: var(--bg-tertiary); padding: 15px; border-radius: 10px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--gold); font-size: 1rem; margin-bottom: 8px;">‚ö° Volatility Strategies</h4>
                            <ul style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                                <li>Long Straddle</li>
                                <li>Short Straddle</li>
                                <li>Long Strangle</li>
                                <li>Short Strangle</li>
                            </ul>
                        </div>
                    </div>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">Key Features of Our Options Calculator</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px; padding-left: 25px;">
                        <li><strong>Real-Time Payoff Diagrams:</strong> Interactive charts showing profit/loss across all price scenarios</li>
                        <li><strong>10 Pre-Built Strategy Templates:</strong> Quick-start templates for popular strategies</li>
                        <li><strong>Unlimited Custom Legs:</strong> Build complex multi-leg strategies with any combination</li>
                        <li><strong>Comprehensive Metrics:</strong> Max profit, max loss, breakeven, net premium, risk/reward ratio</li>
                        <li><strong>Indian Market Support:</strong> Perfect for NSE options trading with INR calculations</li>
                        <li><strong>Mobile Responsive:</strong> Works seamlessly on all devices</li>
                        <li><strong>100% Free:</strong> No registration, no limits, no hidden costs</li>
                    </ul>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">How to Use the Options Strategy Builder</h3>
                    <ol style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px; padding-left: 25px;">
                        <li><strong>Select a Strategy Template:</strong> Choose from Iron Condor, Butterfly, Straddle, Strangle, or Spreads, or build from scratch</li>
                        <li><strong>Add Option Legs:</strong> Click "Add Option Leg" and configure each leg with Buy/Sell, Call/Put, strike price, premium, and quantity</li>
                        <li><strong>Configure Parameters:</strong> Enter current market prices for strike prices and premiums based on your analysis</li>
                        <li><strong>Calculate & Visualize:</strong> Click the button to generate the payoff diagram and view all strategy metrics</li>
                        <li><strong>Analyze Results:</strong> Review max profit/loss, breakeven points, and risk/reward to make informed decisions</li>
                    </ol>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">Understanding Options Strategy Metrics</h3>
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 15px;">
                        <strong>Maximum Profit:</strong> The highest possible profit your strategy can achieve at expiration. Some strategies like long calls have unlimited profit potential.
                    </p>
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 15px;">
                        <strong>Maximum Loss:</strong> The worst-case scenario loss if the market moves against your position. Critical for risk management and position sizing.
                    </p>
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 15px;">
                        <strong>Breakeven Points:</strong> The underlying price(s) where your strategy neither makes nor loses money. Complex strategies can have multiple breakeven points.
                    </p>
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px;">
                        <strong>Net Premium:</strong> The total credit received (positive) or debit paid (negative) when entering the strategy. Affects your breakeven and maximum profit/loss.
                    </p>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">Popular Options Strategies Explained</h3>
                    
                    <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--border-color);">
                        <h4 style="color: var(--gold); font-size: 1.1rem; margin-bottom: 10px;">ü¶Ö Iron Condor Calculator</h4>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            An Iron Condor is a neutral strategy that profits from low volatility. It combines a bull put spread and a bear call spread, creating a range where maximum profit is achieved. Use our Iron Condor calculator to visualize the profit zone and calculate exact breakeven points. Perfect for range-bound markets like Bank Nifty options trading.
                        </p>
                    </div>

                    <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--border-color);">
                        <h4 style="color: var(--gold); font-size: 1.1rem; margin-bottom: 10px;">ü¶ã Butterfly Spread Calculator</h4>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            A Butterfly spread is a limited risk, limited profit strategy that profits when the underlying stays near a specific price. It uses three strike prices with a 1-2-1 ratio. Our butterfly calculator shows the exact profit peak and helps you determine if the risk/reward is worth it for your trading style.
                        </p>
                    </div>

                    <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--border-color);">
                        <h4 style="color: var(--gold); font-size: 1.1rem; margin-bottom: 10px;">‚ö° Straddle & Strangle Calculator</h4>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            Straddles and Strangles are volatility strategies that profit from big moves in either direction. A Long Straddle buys a call and put at the same strike, while a Strangle uses different strikes. Use our calculator to see the breakeven points and understand how much the market needs to move for profitability.
                        </p>
                    </div>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">Best Practices for Options Trading</h3>
                    <ul style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px; padding-left: 25px;">
                        <li>Always calculate your maximum loss before entering any options strategy</li>
                        <li>Use the payoff diagram to understand all possible outcomes at expiration</li>
                        <li>Consider transaction costs, STT, and brokerage in your calculations</li>
                        <li>Never risk more than 1-2% of your capital on a single trade</li>
                        <li>Understand the Greeks (Delta, Gamma, Theta, Vega) for active position management</li>
                        <li>Test strategies with small positions before scaling up</li>
                        <li>Keep track of important dates like expiration and dividend dates</li>
                        <li>Use stop losses even with defined-risk strategies</li>
                    </ul>

                    <h3 style="color: var(--text-primary); font-size: 1.3rem; margin: 30px 0 15px;">Options Trading for Indian Markets (NSE)</h3>
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px;">
                        This options strategy builder is perfect for <strong>Indian options traders</strong> trading on NSE. Whether you're trading <strong>Bank Nifty weekly options</strong>, <strong>Nifty monthly options</strong>, or stock options, enter strike prices and premiums in Indian Rupees (‚Çπ) and get accurate profit/loss calculations. The tool handles lot sizes, so multiply your results by the appropriate lot size (25 for Bank Nifty, 50 for Nifty).
                    </p>

                    <div style="background: linear-gradient(135deg, rgba(201, 162, 39, 0.1) 0%, rgba(201, 162, 39, 0.05) 100%); padding: 25px; border-radius: 12px; border: 1px solid var(--border-gold); margin-top: 30px;">
                        <p style="color: var(--text-primary); font-size: 1rem; line-height: 1.8; margin: 0;">
                            <strong style="color: var(--gold);">üí° Pro Tip:</strong> The best options traders use strategy builders to plan trades before execution. Visualize your risk/reward, set clear profit targets and stop losses, and never enter a trade without understanding all possible outcomes. This free tool gives you institutional-level analysis at zero cost.
                        </p>
                    </div>
                </article>

                <!-- FAQ Section -->
                <article style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 20px; padding: 40px; margin-bottom: 40px;">
                    <h2 style="color: var(--gold); font-size: 1.8rem; margin-bottom: 30px;">Frequently Asked Questions</h2>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 10px;">What is the best free options strategy builder?</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            BroBillionaire's Options Strategy Builder is one of the most comprehensive free tools available. It offers unlimited strategy legs, real-time payoff diagrams, pre-built templates for popular strategies, and works perfectly for both Indian and global markets. No registration required.
                        </p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 10px;">Can I use this for Bank Nifty and Nifty options?</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            Yes! This options calculator is perfect for NSE options trading. Enter strike prices and premiums in Indian Rupees (‚Çπ) for Bank Nifty or Nifty options. Remember to multiply the final profit/loss by the lot size (Bank Nifty = 25, Nifty = 50) for actual position sizing.
                        </p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 10px;">How accurate are the profit/loss calculations?</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            The calculations are mathematically accurate for profit/loss at expiration based on intrinsic value. However, during the trade, actual P&L will vary due to time decay (Theta), implied volatility changes (Vega), and other Greeks. This tool shows expiration values, which is standard for options analysis.
                        </p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 10px;">What's the difference between a Straddle and a Strangle?</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            A Straddle buys (or sells) a call and put at the same strike price, while a Strangle uses different strikes - typically out-of-the-money options. Strangles are cheaper to enter but require bigger moves to profit. Use our calculator to compare both strategies side-by-side.
                        </p>
                    </div>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 10px;">How do I build an Iron Condor strategy?</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            Click the "Iron Condor" quick strategy button to load a template, or manually build it by: 1) Buy an OTM Put, 2) Sell a higher strike Put, 3) Sell an OTM Call, 4) Buy a higher strike Call. This creates a profit zone between the two short strikes where you keep the net credit received.
                        </p>
                    </div>

                    <div style="margin-bottom: 0;">
                        <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 10px;">Can I build custom strategies with more than 4 legs?</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin: 0;">
                            Yes! Our options strategy builder supports unlimited legs. You can create complex strategies like Double Diagonals, Jade Lizards, Broken Wing Butterflies, or any custom combination you can imagine. Just keep adding legs and the calculator will handle all the math.
                        </p>
                    </div>
                </article>

                <!-- Related Links -->
                <div style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 20px; padding: 30px; margin-bottom: 40px;">
                    <h3 style="color: var(--gold); font-size: 1.3rem; margin-bottom: 20px;">Related Trading Tools & Articles</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                        <a href="tools.html" style="color: var(--text-secondary); text-decoration: none; padding: 12px; background: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border-color); transition: all 0.3s ease; display: block;">
                            <span style="color: var(--gold); margin-right: 8px;">üìä</span>All Trading Tools
                        </a>
                        <a href="article-dangerous-options.html" style="color: var(--text-secondary); text-decoration: none; padding: 12px; background: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border-color); transition: all 0.3s ease; display: block;">
                            <span style="color: var(--gold); margin-right: 8px;">‚ö†Ô∏è</span>Dangerous Options Strategies
                        </a>
                        <a href="article-beginner-options.html" style="color: var(--text-secondary); text-decoration: none; padding: 12px; background: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border-color); transition: all 0.3s ease; display: block;">
                            <span style="color: var(--gold); margin-right: 8px;">üìö</span>Options Trading for Beginners
                        </a>
                        <a href="index.html" style="color: var(--text-secondary); text-decoration: none; padding: 12px; background: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border-color); transition: all 0.3s ease; display: block;">
                            <span style="color: var(--gold); margin-right: 8px;">üè†</span>Back to Home
                        </a>
                    </div>
                </div>
            </div>
        .metric-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
        }

        .metric-value.positive {
            color: var(--green);
        }

        .metric-value.negative {
            color: var(--red);
        }

        .metric-value.neutral {
            color: var(--gold);
        }

        /* Legs Summary */
        .legs-summary {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 20px;
        }

        .legs-summary h3 {
            font-size: 1rem;
            color: var(--gold);
            margin-bottom: 15px;
        }

        .legs-table {
            width: 100%;
            border-collapse: collapse;
        }

        .legs-table th {
            text-align: left;
            font-size: 0.8rem;
            color: var(--text-secondary);
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
        }

        .legs-table td {
            padding: 12px 10px;
            font-size: 0.9rem;
            color: var(--text-primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .legs-table tr:last-child td {
            border-bottom: none;
        }

        .legs-table .action-cell {
            color: var(--green);
            font-weight: 600;
        }

        .legs-table .action-cell.sell {
            color: var(--red);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }

        .empty-state i {
            font-size: 4rem;
            color: var(--border-gold);
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .empty-state p {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .strategy-grid {
                grid-template-columns: 1fr;
            }

            .control-panel {
                position: relative;
                top: 0;
            }
        }

        @media (max-width: 768px) {
            .strategy-builder-page {
                padding: 60px 15px 40px;
            }

            .quick-strategies {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body>
    <div class="strategy-builder-page">
        <a href="tools.html" class="back-btn">
            <i class="fas fa-arrow-left"></i>
            Back to Tools
        </a>

        <div class="strategy-container">
            <div class="strategy-header">
                <h1>‚ö° Options Strategy Builder</h1>
                <p>Build, visualize, and analyze any options strategy. Calculate profit/loss, breakeven points, and risk metrics in real-time.</p>
            </div>

            <div class="strategy-grid">
                <!-- Control Panel -->
                <div class="control-panel">
                    <div class="panel-section">
                        <h3><i class="fas fa-bolt"></i> Quick Strategies</h3>
                        <div class="quick-strategies">
                            <button class="quick-strategy-btn" onclick="loadStrategy('longCall')">Long Call</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('longPut')">Long Put</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('coveredCall')">Covered Call</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('protectivePut')">Protective Put</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('bullCallSpread')">Bull Call Spread</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('bearPutSpread')">Bear Put Spread</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('longStraddle')">Long Straddle</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('longStrangle')">Long Strangle</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('ironCondor')">Iron Condor</button>
                            <button class="quick-strategy-btn" onclick="loadStrategy('butterfly')">Butterfly</button>
                        </div>
                    </div>

                    <div class="panel-section">
                        <h3><i class="fas fa-layer-group"></i> Strategy Legs</h3>
                        <div class="legs-container" id="legsContainer">
                            <div class="empty-state" style="padding: 40px 20px;">
                                <i class="fas fa-plus-circle"></i>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Add legs to build your strategy</p>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="add-leg-btn" onclick="addLeg()">
                            <i class="fas fa-plus"></i>
                            Add Option Leg
                        </button>
                        <button class="calculate-btn" onclick="calculateStrategy()">
                            <i class="fas fa-calculator"></i>
                            Calculate & Visualize
                        </button>
                        <button class="reset-btn" onclick="resetStrategy()">
                            <i class="fas fa-redo"></i>
                            Reset All
                        </button>
                    </div>
                </div>

                <!-- Visualization Panel -->
                <div class="visualization-panel">
                    <div class="viz-header">
                        <h2>Strategy Visualization</h2>
                        <input type="text" class="strategy-name-input" id="strategyName" placeholder="Strategy Name" value="Custom Strategy">
                    </div>

                    <div id="resultsArea" style="display: none;">
                        <!-- Chart -->
                        <div class="chart-container">
                            <canvas id="payoffChart"></canvas>
                        </div>

                        <!-- Metrics -->
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-label">Max Profit</div>
                                <div class="metric-value positive" id="maxProfit">‚Çπ0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Max Loss</div>
                                <div class="metric-value negative" id="maxLoss">‚Çπ0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Breakeven</div>
                                <div class="metric-value neutral" id="breakeven">‚Çπ0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Net Premium</div>
                                <div class="metric-value" id="netPremium">‚Çπ0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Risk/Reward</div>
                                <div class="metric-value neutral" id="riskReward">0:0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Probability</div>
                                <div class="metric-value neutral" id="probability">0%</div>
                            </div>
                        </div>

                        <!-- Legs Summary -->
                        <div class="legs-summary">
                            <h3>Strategy Composition</h3>
                            <table class="legs-table" id="legsSummaryTable">
                                <thead>
                                    <tr>
                                        <th>Action</th>
                                        <th>Type</th>
                                        <th>Strike</th>
                                        <th>Premium</th>
                                        <th>Quantity</th>
                                    </tr>
                                </thead>
                                <tbody id="legsSummaryBody">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="emptyVisualization" class="empty-state">
                        <i class="fas fa-chart-line"></i>
                        <h3>Ready to Visualize</h3>
                        <p>Add option legs and click "Calculate & Visualize" to see your strategy's payoff diagram and metrics.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script>
        // Global state
        let legs = [];
        let legCounter = 0;
        let chart = null;

        // Add new option leg
        function addLeg() {
            const legId = legCounter++;
            const leg = {
                id: legId,
                action: 'buy',
                type: 'call',
                strike: 20000,
                premium: 100,
                quantity: 1
            };
            legs.push(leg);
            renderLegs();
        }

        // Remove leg
        function removeLeg(legId) {
            legs = legs.filter(leg => leg.id !== legId);
            renderLegs();
        }

        // Update leg
        function updateLeg(legId, field, value) {
            const leg = legs.find(l => l.id === legId);
            if (leg) {
                leg[field] = value;
            }
        }

        // Render legs
        function renderLegs() {
            const container = document.getElementById('legsContainer');
            
            if (legs.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 40px 20px;">
                        <i class="fas fa-plus-circle"></i>
                        <p style="font-size: 0.9rem; color: var(--text-secondary);">Add legs to build your strategy</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = legs.map((leg, index) => `
                <div class="option-leg">
                    <button class="remove-leg-btn" onclick="removeLeg(${leg.id})">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="leg-header">
                        <span class="leg-title">Leg ${index + 1}</span>
                        <span class="leg-type-badge ${leg.action}">${leg.action.toUpperCase()}</span>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Action</label>
                            <select onchange="updateLeg(${leg.id}, 'action', this.value); renderLegs();">
                                <option value="buy" ${leg.action === 'buy' ? 'selected' : ''}>Buy</option>
                                <option value="sell" ${leg.action === 'sell' ? 'selected' : ''}>Sell</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Type</label>
                            <select onchange="updateLeg(${leg.id}, 'type', this.value)">
                                <option value="call" ${leg.type === 'call' ? 'selected' : ''}>Call</option>
                                <option value="put" ${leg.type === 'put' ? 'selected' : ''}>Put</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Strike Price (‚Çπ)</label>
                        <input type="number" value="${leg.strike}" onchange="updateLeg(${leg.id}, 'strike', parseFloat(this.value))">
                    </div>
                    <div class="input-group">
                        <label>Premium (‚Çπ)</label>
                        <input type="number" value="${leg.premium}" step="0.5" onchange="updateLeg(${leg.id}, 'premium', parseFloat(this.value))">
                    </div>
                    <div class="input-group">
                        <label>Quantity (Lots)</label>
                        <input type="number" value="${leg.quantity}" min="1" onchange="updateLeg(${leg.id}, 'quantity', parseInt(this.value))">
                    </div>
                </div>
            `).join('');
        }

        // Calculate payoff for a price point
        function calculatePayoff(spotPrice) {
            let totalPayoff = 0;
            
            legs.forEach(leg => {
                const multiplier = leg.action === 'buy' ? 1 : -1;
                let payoff = 0;
                
                if (leg.type === 'call') {
                    payoff = Math.max(0, spotPrice - leg.strike) - leg.premium;
                } else {
                    payoff = Math.max(0, leg.strike - spotPrice) - leg.premium;
                }
                
                if (leg.action === 'sell') {
                    payoff = leg.premium - Math.max(0, leg.type === 'call' ? spotPrice - leg.strike : leg.strike - spotPrice);
                }
                
                totalPayoff += payoff * leg.quantity;
            });
            
            return totalPayoff;
        }

        // Calculate strategy metrics
        function calculateMetrics() {
            if (legs.length === 0) return null;

            const strikes = legs.map(leg => leg.strike);
            const minStrike = Math.min(...strikes);
            const maxStrike = Math.max(...strikes);
            const range = maxStrike - minStrike || 1000;
            
            const minPrice = minStrike - range * 0.5;
            const maxPrice = maxStrike + range * 0.5;
            const step = (maxPrice - minPrice) / 200;
            
            let maxProfit = -Infinity;
            let maxLoss = Infinity;
            let breakevens = [];
            
            let prevPayoff = null;
            
            for (let price = minPrice; price <= maxPrice; price += step) {
                const payoff = calculatePayoff(price);
                
                maxProfit = Math.max(maxProfit, payoff);
                maxLoss = Math.min(maxLoss, payoff);
                
                // Find breakevens (zero crossings)
                if (prevPayoff !== null) {
                    if ((prevPayoff < 0 && payoff > 0) || (prevPayoff > 0 && payoff < 0)) {
                        breakevens.push(price);
                    }
                }
                prevPayoff = payoff;
            }
            
            // Calculate net premium
            const netPremium = legs.reduce((sum, leg) => {
                const sign = leg.action === 'buy' ? -1 : 1;
                return sum + (sign * leg.premium * leg.quantity);
            }, 0);
            
            return {
                maxProfit: maxProfit === Infinity ? 'Unlimited' : maxProfit,
                maxLoss: maxLoss === -Infinity ? 'Unlimited' : Math.abs(maxLoss),
                breakevens,
                netPremium,
                minPrice,
                maxPrice,
                step
            };
        }

        // Calculate and visualize strategy
        function calculateStrategy() {
            if (legs.length === 0) {
                alert('Please add at least one option leg to your strategy');
                return;
            }

            const metrics = calculateMetrics();
            
            // Show results area
            document.getElementById('resultsArea').style.display = 'block';
            document.getElementById('emptyVisualization').style.display = 'none';
            
            // Update metrics
            document.getElementById('maxProfit').textContent = 
                metrics.maxProfit === 'Unlimited' ? 'Unlimited' : `‚Çπ${metrics.maxProfit.toFixed(2)}`;
            document.getElementById('maxProfit').className = 
                metrics.maxProfit === 'Unlimited' || metrics.maxProfit > 0 ? 'metric-value positive' : 'metric-value';
            
            document.getElementById('maxLoss').textContent = 
                metrics.maxLoss === 'Unlimited' ? 'Unlimited' : `‚Çπ${metrics.maxLoss.toFixed(2)}`;
            
            const breakeven = metrics.breakevens.length > 0 ? 
                `‚Çπ${metrics.breakevens[0].toFixed(2)}${metrics.breakevens.length > 1 ? ' - ‚Çπ' + metrics.breakevens[metrics.breakevens.length - 1].toFixed(2) : ''}` : 
                'N/A';
            document.getElementById('breakeven').textContent = breakeven;
            
            const netPremiumEl = document.getElementById('netPremium');
            netPremiumEl.textContent = `‚Çπ${metrics.netPremium.toFixed(2)}`;
            netPremiumEl.className = metrics.netPremium >= 0 ? 'metric-value positive' : 'metric-value negative';
            
            const riskReward = metrics.maxLoss !== 'Unlimited' && metrics.maxProfit !== 'Unlimited' ?
                `1:${(metrics.maxProfit / metrics.maxLoss).toFixed(2)}` : 'N/A';
            document.getElementById('riskReward').textContent = riskReward;
            
            document.getElementById('probability').textContent = 'N/A';
            
            // Update legs summary table
            const tbody = document.getElementById('legsSummaryBody');
            tbody.innerHTML = legs.map(leg => `
                <tr>
                    <td class="action-cell ${leg.action}">${leg.action.toUpperCase()}</td>
                    <td>${leg.type.toUpperCase()}</td>
                    <td>‚Çπ${leg.strike}</td>
                    <td>‚Çπ${leg.premium}</td>
                    <td>${leg.quantity}</td>
                </tr>
            `).join('');
            
            // Generate chart data
            const labels = [];
            const data = [];
            
            for (let price = metrics.minPrice; price <= metrics.maxPrice; price += metrics.step) {
                labels.push(price.toFixed(0));
                data.push(calculatePayoff(price));
            }
            
            // Create/update chart
            const ctx = document.getElementById('payoffChart');
            
            if (chart) {
                chart.destroy();
            }
            
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Profit/Loss',
                        data: data,
                        borderColor: '#C9A227',
                        backgroundColor: 'rgba(201, 162, 39, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        pointHoverBackgroundColor: '#C9A227',
                        pointHoverBorderColor: '#fff',
                        pointHoverBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(13, 13, 13, 0.95)',
                            titleColor: '#C9A227',
                            bodyColor: '#ffffff',
                            borderColor: 'rgba(201, 162, 39, 0.3)',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                title: function(context) {
                                    return `Spot: ‚Çπ${context[0].label}`;
                                },
                                label: function(context) {
                                    const value = context.parsed.y;
                                    return `P&L: ‚Çπ${value.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Underlying Price (‚Çπ)',
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    size: 13,
                                    weight: '600'
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)',
                                drawBorder: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.5)',
                                maxTicksLimit: 10,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Profit / Loss (‚Çπ)',
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    size: 13,
                                    weight: '600'
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)',
                                drawBorder: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.5)',
                                font: {
                                    size: 11
                                },
                                callback: function(value) {
                                    return '‚Çπ' + value.toFixed(0);
                                }
                            },
                            border: {
                                dash: [5, 5],
                                color: 'rgba(201, 162, 39, 0.3)'
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        // Reset strategy
        function resetStrategy() {
            if (confirm('Are you sure you want to reset all legs?')) {
                legs = [];
                legCounter = 0;
                renderLegs();
                document.getElementById('resultsArea').style.display = 'none';
                document.getElementById('emptyVisualization').style.display = 'block';
                if (chart) {
                    chart.destroy();
                    chart = null;
                }
            }
        }

        // Load predefined strategies
        function loadStrategy(strategyName) {
            legs = [];
            legCounter = 0;

            const strategies = {
                longCall: [
                    { action: 'buy', type: 'call', strike: 20000, premium: 200, quantity: 1 }
                ],
                longPut: [
                    { action: 'buy', type: 'put', strike: 20000, premium: 180, quantity: 1 }
                ],
                coveredCall: [
                    { action: 'sell', type: 'call', strike: 20500, premium: 150, quantity: 1 }
                ],
                protectivePut: [
                    { action: 'buy', type: 'put', strike: 19500, premium: 160, quantity: 1 }
                ],
                bullCallSpread: [
                    { action: 'buy', type: 'call', strike: 20000, premium: 200, quantity: 1 },
                    { action: 'sell', type: 'call', strike: 20500, premium: 100, quantity: 1 }
                ],
                bearPutSpread: [
                    { action: 'buy', type: 'put', strike: 20000, premium: 180, quantity: 1 },
                    { action: 'sell', type: 'put', strike: 19500, premium: 90, quantity: 1 }
                ],
                longStraddle: [
                    { action: 'buy', type: 'call', strike: 20000, premium: 200, quantity: 1 },
                    { action: 'buy', type: 'put', strike: 20000, premium: 180, quantity: 1 }
                ],
                longStrangle: [
                    { action: 'buy', type: 'call', strike: 20500, premium: 150, quantity: 1 },
                    { action: 'buy', type: 'put', strike: 19500, premium: 140, quantity: 1 }
                ],
                ironCondor: [
                    { action: 'buy', type: 'put', strike: 19000, premium: 50, quantity: 1 },
                    { action: 'sell', type: 'put', strike: 19500, premium: 100, quantity: 1 },
                    { action: 'sell', type: 'call', strike: 20500, premium: 110, quantity: 1 },
                    { action: 'buy', type: 'call', strike: 21000, premium: 60, quantity: 1 }
                ],
                butterfly: [
                    { action: 'buy', type: 'call', strike: 19500, premium: 250, quantity: 1 },
                    { action: 'sell', type: 'call', strike: 20000, premium: 180, quantity: 2 },
                    { action: 'buy', type: 'call', strike: 20500, premium: 120, quantity: 1 }
                ]
            };

            const strategy = strategies[strategyName];
            if (strategy) {
                strategy.forEach(leg => {
                    legs.push({ ...leg, id: legCounter++ });
                });
                renderLegs();
                
                // Update strategy name
                const names = {
                    longCall: 'Long Call',
                    longPut: 'Long Put',
                    coveredCall: 'Covered Call',
                    protectivePut: 'Protective Put',
                    bullCallSpread: 'Bull Call Spread',
                    bearPutSpread: 'Bear Put Spread',
                    longStraddle: 'Long Straddle',
                    longStrangle: 'Long Strangle',
                    ironCondor: 'Iron Condor',
                    butterfly: 'Butterfly Spread'
                };
                document.getElementById('strategyName').value = names[strategyName];
            }
        }

        // Initialize
        renderLegs();
    </script>
<script src="common-footer.js" defer></script>
</body>
</html>
