<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N0Y2LBMRSW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-N0Y2LBMRSW');
    </script>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <!-- Primary Meta Tags -->
    <title>FREE Bond Yield Calculator 2026 - YTM, Current Yield & Bond Price Tool | BroBillionaire</title>
    <meta name="title" content="FREE Bond Yield Calculator 2026 - YTM, Current Yield & Bond Price Tool | BroBillionaire">
    <meta name="description" content="Calculate bond yields instantly! FREE YTM calculator, current yield, bond pricing & duration analysis. Complete fixed income investment tool India 2026!">
    <meta name="keywords" content="bond yield calculator, YTM calculator, current yield, bond price calculator, duration analysis, yield to maturity, fixed income India, government bonds, corporate bonds">
    <meta name="author" content="BroBillionaire">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://brobillionaire.com/tool-bond-yield-calculator.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://brobillionaire.com/tool-bond-yield-calculator.html">
    <meta property="og:title" content="FREE Bond Yield Calculator - YTM & Bond Price Tool">
    <meta property="og:description" content="Calculate bond yields instantly! FREE YTM calculator, current yield, bond pricing & duration analysis. Complete fixed income investment tool.">
    <meta property="og:image" content="https://brobillionaire.com/og-image.jpg">
    <meta property="og:site_name" content="BroBillionaire">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://brobillionaire.com/tool-bond-yield-calculator.html">
    <meta property="twitter:title" content="FREE Bond Yield Calculator - YTM & Bond Price Tool">
    <meta property="twitter:description" content="Calculate bond yields instantly! FREE YTM calculator, current yield, bond pricing & duration analysis.">
    <meta property="twitter:image" content="https://brobillionaire.com/og-image.jpg">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .calculator-container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .calculator-card { background: #1a1a1a; border-radius: 16px; padding: 40px; margin-bottom: 30px; border: 1px solid #2a2a2a; }
        .calculator-title { font-family: 'Playfair Display', serif; font-size: 2.8rem; color: #C9A227; margin-bottom: 10px; }
        .calculator-subtitle { color: #999; font-size: 1.1rem; margin-bottom: 40px; line-height: 1.6; }
        .input-group { margin-bottom: 25px; }
        .input-label { display: block; color: #C9A227; font-weight: 600; margin-bottom: 10px; font-size: 1rem; }
        .input-field { width: 100%; padding: 15px; background: #0a0a0a; border: 2px solid #2a2a2a; border-radius: 8px; color: #fff; font-size: 1rem; transition: border-color 0.3s; }
        .input-field:focus { border-color: #C9A227; outline: none; }
        .input-hint { color: #666; font-size: 0.85rem; margin-top: 5px; }
        .calculate-btn { background: linear-gradient(135deg, #C9A227 0%, #8B7520 100%); color: #000; font-weight: 700; padding: 18px; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; width: 100%; margin-top: 20px; transition: transform 0.2s; }
        .calculate-btn:hover { transform: translateY(-2px); }
        .results-section { display: none; margin-top: 40px; }
        .result-card { background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%); padding: 30px; border-radius: 12px; text-align: center; border-left: 5px solid #C9A227; margin-bottom: 30px; }
        .result-value { color: #C9A227; font-size: 4rem; font-weight: 700; margin: 20px 0; font-family: 'Playfair Display', serif; }
        .result-label { color: #999; font-size: 1.2rem; margin-bottom: 10px; }
        .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 30px; }
        .metric-card { background: #0a0a0a; padding: 25px; border-radius: 12px; border: 1px solid #2a2a2a; text-align: center; }
        .metric-label { color: #C9A227; font-weight: 600; margin-bottom: 12px; font-size: 0.95rem; text-transform: uppercase; letter-spacing: 1px; }
        .metric-value { color: #fff; font-size: 2rem; font-weight: 700; }
        .info-box { background: rgba(201, 162, 39, 0.1); border: 2px solid #C9A227; padding: 25px; border-radius: 12px; margin-top: 30px; }
        .info-box h3 { color: #C9A227; margin-bottom: 15px; }
        .info-box ul { margin: 10px 0 0 20px; color: #999; line-height: 1.8; }
        .chart-container { background: #0a0a0a; padding: 30px; border-radius: 12px; margin-top: 30px; border: 1px solid #2a2a2a; }
        .chart-title { color: #C9A227; font-size: 1.5rem; margin-bottom: 20px; text-align: center; font-weight: 600; }
        .faq-section { max-width: 1200px; margin: 50px auto; padding: 40px 20px; }
        .faq-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: #C9A227; margin-bottom: 40px; text-align: center; }
        .faq-item { background: #1a1a1a; border-radius: 12px; margin-bottom: 15px; border: 1px solid #2a2a2a; overflow: hidden; }
        .faq-question { padding: 25px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; color: #fff; font-weight: 600; font-size: 1.1rem; }
        .faq-question:hover { background: #222; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; background: #0a0a0a; }
        .faq-answer.active { max-height: 1000px; }
        .faq-answer p { padding: 25px; margin: 0; color: #999; line-height: 1.8; }
        @media (max-width: 768px) {
            .calculator-title { font-size: 2rem; }
            .result-value { font-size: 3rem; }
            .grid-2 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <img src="logo.jpg" alt="BroBillionaire" class="logo-img">
                <span class="logo-text">BroBillionaire</span>
            </div>
            <div class="nav-links">
                <a href="articles.html" class="nav-link">All Articles</a>
                <a href="tools.html" class="nav-link">Tools</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="contact.html" class="nav-link">Contact</a>
            </div>
            <button class="cta-btn gold-btn">Read Free</button>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
    <div class="mobile-nav-dropdown" id="mobileNavDropdown">
        <a href="index.html">Home</a>
        <a href="articles.html">Articles</a>
        <a href="tools.html">Calculators</a>
        <a href="viral-tools-hub.html">Viral Tools</a>
        <a href="community.html">Community</a>
        <a href="about.html">About</a>
    </div>

    <!-- Breadcrumb -->
    <div class="breadcrumb-container">
        <div class="breadcrumb">
            <a href="index.html">Home</a>
            <span class="separator">›</span>
            <a href="tools.html">Tools</a>
            <span class="separator">›</span>
            <span class="current">Bond Yield Calculator</span>
        </div>
    </div>

    <div class="calculator-container">
        <div class="calculator-card">
            <h1 class="calculator-title"><i class="fas fa-money-bill-wave"></i> Bond Yield Calculator</h1>
            <p class="calculator-subtitle">Calculate Yield to Maturity (YTM), current yield, bond price, duration, and analyze fixed income investments. Essential for government bonds, corporate bonds, and debt securities.</p>
            
            <div class="grid-2">
                <div class="input-group">
                    <label class="input-label">Face Value (₹)</label>
                    <input type="number" id="faceValue" class="input-field" placeholder="1000" value="1000" step="100">
                    <div class="input-hint">Bond's par value at maturity</div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Current Market Price (₹)</label>
                    <input type="number" id="marketPrice" class="input-field" placeholder="950" step="1">
                    <div class="input-hint">Current trading price of the bond</div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Coupon Rate (%)</label>
                    <input type="number" id="couponRate" class="input-field" placeholder="7.5" step="0.1">
                    <div class="input-hint">Annual interest rate on face value</div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Years to Maturity</label>
                    <input type="number" id="yearsToMaturity" class="input-field" placeholder="5" step="0.5">
                    <div class="input-hint">Time remaining until maturity</div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Payment Frequency</label>
                    <select id="paymentFrequency" class="input-field">
                        <option value="1">Annual</option>
                        <option value="2" selected>Semi-Annual</option>
                        <option value="4">Quarterly</option>
                        <option value="12">Monthly</option>
                    </select>
                    <div class="input-hint">Coupon payment frequency per year</div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Tax Rate (%) - Optional</label>
                    <input type="number" id="taxRate" class="input-field" placeholder="30" value="0" step="0.1">
                    <div class="input-hint">Your income tax bracket</div>
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateBondYield()">
                <i class="fas fa-calculator"></i> Calculate Bond Yield & Metrics
            </button>
        </div>
        
        <div class="results-section" id="resultsSection">
            <div class="calculator-card">
                <h2 style="color: #C9A227; margin-bottom: 30px; font-family: 'Playfair Display', serif; font-size: 2rem; text-align: center;">Bond Analysis Results</h2>
                
                <div class="grid-2">
                    <div class="result-card">
                        <div class="result-label">Yield to Maturity (YTM)</div>
                        <div class="result-value" id="ytmValue">-</div>
                        <div style="color: #999; margin-top: 10px;">Annualized return if held to maturity</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">Current Yield</div>
                        <div class="result-value" id="currentYieldValue">-</div>
                        <div style="color: #999; margin-top: 10px;">Annual coupon ÷ current price</div>
                    </div>
                </div>
                
                <div class="grid-2">
                    <div class="metric-card">
                        <div class="metric-label">Annual Coupon Payment</div>
                        <div class="metric-value" id="annualCoupon">-</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Total Coupon Payments</div>
                        <div class="metric-value" id="totalCoupons">-</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Capital Gain/Loss</div>
                        <div class="metric-value" id="capitalGain">-</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Total Return at Maturity</div>
                        <div class="metric-value" id="totalReturn">-</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Macaulay Duration</div>
                        <div class="metric-value" id="duration">-</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Post-Tax YTM</div>
                        <div class="metric-value" id="postTaxYTM">-</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">Cash Flow Timeline</div>
                    <canvas id="cashFlowChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">Yield Comparison</div>
                    <canvas id="yieldChart"></canvas>
                </div>
                
                <div class="info-box">
                    <h3><i class="fas fa-lightbulb"></i> Bond Investment Insights:</h3>
                    <ul id="bondInsights">
                        <li>Loading insights...</li>
                    </ul>
                </div>
                
                <div style="background: rgba(52, 152, 219, 0.1); border: 2px solid #3498db; padding: 25px; border-radius: 12px; margin-top: 30px;">
                    <h3 style="color: #3498db; margin-bottom: 15px;"><i class="fas fa-info-circle"></i> Understanding Bond Yields:</h3>
                    <p style="color: #999; line-height: 1.8; margin: 0;">
                        <strong>YTM (Yield to Maturity)</strong> is the total return if you hold the bond until maturity, accounting for current price, coupon payments, and face value. 
                        <strong>Current Yield</strong> only considers annual coupon divided by price. YTM is more comprehensive. When bond price < face value (discount), 
                        YTM > Coupon Rate. When price > face value (premium), YTM < Coupon Rate. <strong>Duration</strong> measures price sensitivity to interest rate changes - 
                        higher duration means more price volatility. For Indian investors, G-Secs offer safety while corporate bonds offer higher yields with credit risk.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="faq-section">
        <h2 class="faq-title">Frequently Asked Questions</h2>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                What is Yield to Maturity (YTM) and why is it important?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>YTM is the total return you'll earn if you hold a bond until maturity, considering current price, coupon payments, and face value repayment. It's the most comprehensive yield measure. YTM accounts for: 1) Annual coupon income, 2) Capital gain/loss (difference between purchase price and face value), 3) Time value of money through compounding. Unlike current yield which only considers annual coupon ÷ price, YTM shows true annualized return. Higher YTM means better investment potential, but consider credit risk. For Indian government bonds, YTM typically ranges 6-8%. Corporate bonds offer higher YTM (8-12%) but carry default risk.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                How to calculate YTM manually for bonds in India?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>YTM requires solving: Price = Σ[Coupon/(1+YTM)^t] + FaceValue/(1+YTM)^n. This needs iterative calculation or financial calculator. <strong>Approximation formula:</strong> YTM ≈ [Annual Coupon + (Face Value - Price)/Years] / [(Face Value + Price)/2]. Example: ₹1000 face, ₹950 price, 7% coupon, 5 years: YTM ≈ [70 + (1000-950)/5] / [(1000+950)/2] = [70+10]/975 = 8.2%. Actual YTM using precise calculation: 8.26%. For Indian bonds, use NSE/BSE bond platforms showing live YTM. RBI Retail Direct portal shows G-Sec YTMs. Our calculator uses Newton-Raphson method for exact YTM.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                What's the difference between current yield and YTM?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p><strong>Current Yield = Annual Coupon / Current Price × 100.</strong> Simple but ignores capital gain/loss. If 7% coupon bond trades at ₹950: Current Yield = 70/950 = 7.37%. <strong>YTM considers:</strong> 1) All coupon payments, 2) Face value repayment, 3) Capital gain (₹1000-₹950=₹50), 4) Time value via compounding. Same bond's YTM = 8.26%. Current yield useful for quick income assessment. YTM essential for total return comparison. When buying at discount (price < face), YTM > Current Yield > Coupon Rate. When buying at premium (price > face), Coupon Rate > Current Yield > YTM. Always use YTM for investment decisions between bonds.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                How does bond duration affect investment risk in India?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>Duration measures bond price sensitivity to interest rate changes. <strong>Rule:</strong> If duration = 5 years, 1% rate increase causes ~5% price drop. <strong>Macaulay Duration:</strong> Weighted average time to receive cash flows. <strong>Modified Duration:</strong> Price change for 1% yield change. Longer maturity = higher duration = more volatility. When RBI hikes rates, long-duration bonds fall more. When rates cut, they gain more. Indian G-Secs: 1-3yr duration = low volatility, 7-10yr = medium, 20-30yr = high volatility. Corporate bonds have duration + credit risk. In rising rate environment, prefer short duration. In falling rates, buy long duration bonds for capital gains. Duration also indicates years to recover investment.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                Best bonds to invest in India 2026 - G-Secs vs Corporate?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p><strong>G-Secs (Government Securities):</strong> Zero default risk, YTM 6.5-7.5%, tradable on RBI Retail Direct, best for safety. <strong>Corporate Bonds:</strong> AAA-rated: 7.5-8.5%, AA-rated: 8.5-10%, high yield but credit risk. <strong>Investment strategy:</strong> 1) <strong>Conservative:</strong> 80% G-Secs, 20% AAA corporate bonds. 2) <strong>Balanced:</strong> 60% G-Secs, 40% AAA/AA corporate. 3) <strong>Aggressive:</strong> 40% G-Secs, 60% corporate (diversified). Buy bonds through: NSE/BSE bond platforms, RBI Retail Direct (G-Secs), Zerodha/Groww/INDmoney bond sections. Consider tax: G-Sec interest taxed as income. Hold >3yrs for LTCG benefits. In 2026, with stable rates, 7-10 year G-Secs offering 7%+ YTM are attractive.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                How to calculate post-tax returns on bonds?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>Bond taxation in India: <strong>Interest income:</strong> Taxed as per income tax slab (30% for highest bracket). <strong>Capital gains:</strong> Short-term (<3yrs) = slab rate, Long-term (>3yrs) = 20% with indexation. <strong>Post-tax YTM calculation:</strong> Reduce coupon income by tax rate. If YTM=8%, 30% tax bracket: Post-tax = 8% × (1-0.30) = 5.6%. <strong>Tax-saving tips:</strong> 1) Hold bonds in tax-advantaged accounts, 2) Time sales for LTCG (>3yrs), 3) Use indexation benefits for old bonds, 4) Consider tax-free bonds (rare but exist), 5) RBI Floating Rate Bonds offer inflation protection. For 30% bracket investors, 8% corporate bond = 5.6% post-tax, similar to 7% FD but tradable and potentially capital gains.</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-top">
                <div class="footer-brand">
                    <div class="logo">
                        <img src="logo.jpg" alt="BroBillionaire" class="logo-img">
                        <span class="logo-text">BroBillionaire</span>
                    </div>
                    <p>Free trading education for everyone. Master the markets with proven strategies.</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Explore</h4>
                        <a href="articles.html">All Articles</a>
                        <a href="tools.html">Trading Tools</a>
                        <a href="about.html">About Us</a>
                        <a href="contact.html">Contact</a>
                    </div>
                    <div class="footer-column">
                        <h4>Popular Topics</h4>
                        <a href="article-george-soros.html">George Soros</a>
                        <a href="article-trading-psychology.html">Trading Psychology</a>
                        <a href="article-risk-management.html">Risk Management</a>
                        <a href="article-option-greeks.html">Option Greeks</a>
                    </div>
                    <div class="footer-column">
                        <h4>Legal</h4>
                        <a href="disclaimer.html">Disclaimer</a>
                        <a href="privacy.html">Privacy Policy</a>
                        <a href="press.html">Press & Media</a>
                        <a href="embed-widgets.html">Free Widgets</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 BroBillionaire. All rights reserved. Free trading education.</p>
                <div class="social-links">
                    <a href="https://www.youtube.com/@RealBroBillionaire" target="_blank"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        let cashFlowChart, yieldChart;

        function calculateBondYield() {
            const faceValue = parseFloat(document.getElementById('faceValue').value);
            const marketPrice = parseFloat(document.getElementById('marketPrice').value);
            const couponRate = parseFloat(document.getElementById('couponRate').value);
            const yearsToMaturity = parseFloat(document.getElementById('yearsToMaturity').value);
            const paymentFrequency = parseFloat(document.getElementById('paymentFrequency').value);
            const taxRate = parseFloat(document.getElementById('taxRate').value) || 0;
            
            if (isNaN(faceValue) || isNaN(marketPrice) || isNaN(couponRate) || isNaN(yearsToMaturity)) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (marketPrice <= 0 || faceValue <= 0 || yearsToMaturity <= 0) {
                alert('Values must be positive numbers');
                return;
            }
            
            // Calculate basic metrics
            const annualCoupon = (faceValue * couponRate) / 100;
            const periodicCoupon = annualCoupon / paymentFrequency;
            const totalPeriods = yearsToMaturity * paymentFrequency;
            const totalCoupons = annualCoupon * yearsToMaturity;
            const capitalGain = faceValue - marketPrice;
            const totalReturn = totalCoupons + capitalGain;
            
            // Current Yield
            const currentYield = (annualCoupon / marketPrice) * 100;
            
            // Calculate YTM using Newton-Raphson method
            let ytm = couponRate / 100; // Initial guess
            for (let i = 0; i < 100; i++) {
                let price = 0;
                let priceDerivative = 0;
                
                for (let t = 1; t <= totalPeriods; t++) {
                    const discount = Math.pow(1 + ytm/paymentFrequency, t);
                    price += periodicCoupon / discount;
                    priceDerivative -= (t * periodicCoupon) / (paymentFrequency * discount * (1 + ytm/paymentFrequency));
                }
                
                const finalDiscount = Math.pow(1 + ytm/paymentFrequency, totalPeriods);
                price += faceValue / finalDiscount;
                priceDerivative -= (totalPeriods * faceValue) / (paymentFrequency * finalDiscount * (1 + ytm/paymentFrequency));
                
                const diff = price - marketPrice;
                if (Math.abs(diff) < 0.01) break;
                
                ytm = ytm - diff / priceDerivative;
            }
            
            const ytmPercent = ytm * 100;
            
            // Calculate Macaulay Duration
            let duration = 0;
            let totalPV = 0;
            for (let t = 1; t <= totalPeriods; t++) {
                const pv = periodicCoupon / Math.pow(1 + ytm/paymentFrequency, t);
                duration += (t / paymentFrequency) * pv;
                totalPV += pv;
            }
            const finalPV = faceValue / Math.pow(1 + ytm/paymentFrequency, totalPeriods);
            duration += yearsToMaturity * finalPV;
            totalPV += finalPV;
            duration = duration / totalPV;
            
            // Post-tax YTM
            const postTaxYTM = ytmPercent * (1 - taxRate/100);
            
            // Display results
            document.getElementById('ytmValue').textContent = ytmPercent.toFixed(2) + '%';
            document.getElementById('currentYieldValue').textContent = currentYield.toFixed(2) + '%';
            document.getElementById('annualCoupon').textContent = '₹' + annualCoupon.toFixed(2);
            document.getElementById('totalCoupons').textContent = '₹' + totalCoupons.toFixed(2);
            document.getElementById('capitalGain').textContent = (capitalGain >= 0 ? '₹' : '-₹') + Math.abs(capitalGain).toFixed(2);
            document.getElementById('totalReturn').textContent = '₹' + totalReturn.toFixed(2);
            document.getElementById('duration').textContent = duration.toFixed(2) + ' years';
            document.getElementById('postTaxYTM').textContent = postTaxYTM.toFixed(2) + '%';
            
            // Generate insights
            const insights = [];
            if (marketPrice < faceValue) {
                insights.push(`Bond trading at <strong>discount</strong> (₹${marketPrice.toFixed(2)} vs ₹${faceValue} face). You'll gain ₹${capitalGain.toFixed(2)} at maturity.`);
            } else if (marketPrice > faceValue) {
                insights.push(`Bond trading at <strong>premium</strong> (₹${marketPrice.toFixed(2)} vs ₹${faceValue} face). You'll lose ₹${Math.abs(capitalGain).toFixed(2)} at maturity.`);
            } else {
                insights.push(`Bond trading at <strong>par value</strong>. YTM equals coupon rate.`);
            }
            
            if (ytmPercent > 8) {
                insights.push(`<strong>High YTM of ${ytmPercent.toFixed(2)}%</strong> - Attractive return, but verify credit rating and issuer quality.`);
            } else if (ytmPercent < 6) {
                insights.push(`<strong>Low YTM of ${ytmPercent.toFixed(2)}%</strong> - Safe government bonds or overpriced corporate bonds. Check alternatives.`);
            }
            
            if (duration > 7) {
                insights.push(`<strong>High duration of ${duration.toFixed(2)} years</strong> - Bond price highly sensitive to interest rate changes. Volatile.`);
            } else if (duration < 3) {
                insights.push(`<strong>Low duration of ${duration.toFixed(2)} years</strong> - Bond price stable against interest rate changes. Lower risk.`);
            }
            
            if (taxRate > 0) {
                insights.push(`After ${taxRate}% tax, effective YTM = <strong>${postTaxYTM.toFixed(2)}%</strong>. Compare with tax-free alternatives.`);
            }
            
            const annualizedReturn = ((totalReturn / marketPrice) / yearsToMaturity) * 100;
            insights.push(`Investment of ₹${marketPrice.toFixed(2)} returns ₹${totalReturn.toFixed(2)} over ${yearsToMaturity} years = ${annualizedReturn.toFixed(2)}% simple return.`);
            
            if (currentYield > ytmPercent) {
                insights.push(`Current yield (${currentYield.toFixed(2)}%) > YTM - Bond likely bought at premium. Capital loss at maturity.`);
            }
            
            document.getElementById('bondInsights').innerHTML = insights.map(i => `<li>${i}</li>`).join('');
            
            // Create cash flow chart
            createCashFlowChart(yearsToMaturity, annualCoupon, faceValue, paymentFrequency);
            
            // Create yield comparison chart
            createYieldChart(couponRate, currentYield, ytmPercent, postTaxYTM);
            
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        function createCashFlowChart(years, annualCoupon, faceValue, frequency) {
            const ctx = document.getElementById('cashFlowChart').getContext('2d');
            
            const labels = [];
            const cashFlows = [];
            
            for (let i = 1/frequency; i <= years; i += 1/frequency) {
                labels.push(`Year ${i.toFixed(2)}`);
                cashFlows.push(annualCoupon / frequency);
            }
            labels[labels.length - 1] = `Maturity (${years}yr)`;
            cashFlows[cashFlows.length - 1] += faceValue;
            
            if (cashFlowChart) cashFlowChart.destroy();
            
            cashFlowChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels.filter((_, i) => i % Math.ceil(labels.length/20) === 0 || i === labels.length-1),
                    datasets: [{
                        label: 'Cash Flow (₹)',
                        data: cashFlows.filter((_, i) => i % Math.ceil(cashFlows.length/20) === 0 || i === cashFlows.length-1),
                        backgroundColor: 'rgba(201, 162, 39, 0.7)',
                        borderColor: '#C9A227',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { labels: { color: '#C9A227', font: { size: 14 } } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Cash Flow: ₹' + context.parsed.y.toFixed(2);
                                }
                            }
                        }
                    },
                    scales: {
                        x: { ticks: { color: '#999' }, grid: { color: '#2a2a2a' } },
                        y: { 
                            ticks: { 
                                color: '#999',
                                callback: function(value) { return '₹' + value; }
                            }, 
                            grid: { color: '#2a2a2a' } 
                        }
                    }
                }
            });
        }
        
        function createYieldChart(couponRate, currentYield, ytm, postTaxYTM) {
            const ctx = document.getElementById('yieldChart').getContext('2d');
            
            if (yieldChart) yieldChart.destroy();
            
            yieldChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Coupon Rate', 'Current Yield', 'YTM', 'Post-Tax YTM'],
                    datasets: [{
                        label: 'Yield (%)',
                        data: [couponRate, currentYield, ytm, postTaxYTM],
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(155, 89, 182, 0.7)',
                            'rgba(201, 162, 39, 0.7)',
                            'rgba(231, 76, 60, 0.7)'
                        ],
                        borderColor: [
                            '#3498db',
                            '#9b59b6',
                            '#C9A227',
                            '#e74c3c'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed.y.toFixed(2) + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        x: { ticks: { color: '#999', font: { size: 11 } }, grid: { color: '#2a2a2a' } },
                        y: { 
                            ticks: { 
                                color: '#999',
                                callback: function(value) { return value + '%'; }
                            }, 
                            grid: { color: '#2a2a2a' },
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const isActive = answer.classList.contains('active');
            document.querySelectorAll('.faq-answer').forEach(a => a.classList.remove('active'));
            if (!isActive) answer.classList.add('active');
        }
        
        function toggleMobileMenu() {
            const toggle = document.querySelector('.mobile-menu-toggle');
            const dropdown = document.getElementById('mobileNavDropdown');
            if (toggle && dropdown) {
                toggle.classList.toggle('active');
                dropdown.classList.toggle('active');
            }
        }
    </script>
</body>
</html>
