<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N0Y2LBMRSW"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-N0Y2LBMRSW');</script>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelly Criterion Calculator - Optimal Position Sizing | BroBillionaire</title>
    <meta name="description" content="Calculate optimal bet size using Kelly Criterion formula. Maximize long-term growth rate while managing risk in trading and investing.">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .calculator-container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .calculator-card { background: #1a1a1a; border-radius: 16px; padding: 40px; margin-bottom: 30px; border: 1px solid #2a2a2a; }
        .calculator-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: #C9A227; margin-bottom: 10px; }
        .calculator-subtitle { color: #999; font-size: 1.1rem; margin-bottom: 40px; }
        .input-group { margin-bottom: 25px; }
        .input-label { display: block; color: #C9A227; font-weight: 600; margin-bottom: 10px; }
        .input-field { width: 100%; padding: 15px; background: #0a0a0a; border: 2px solid #2a2a2a; border-radius: 8px; color: #fff; font-size: 1rem; }
        .calculate-btn { background: linear-gradient(135deg, #C9A227 0%, #8B7520 100%); color: #000; font-weight: 700; padding: 18px; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; width: 100%; margin-top: 20px; }
        .results-section { display: none; margin-top: 40px; }
        .result-card { background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%); padding: 30px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #C9A227; }
        .result-value { color: #fff; font-size: 2.5rem; font-weight: 700; }
        .warning-box { background: rgba(231, 76, 60, 0.1); border: 2px solid #e74c3c; padding: 20px; border-radius: 12px; margin-top: 20px; }
        .info-box { background: rgba(52, 152, 219, 0.1); border: 2px solid #3498db; padding: 20px; border-radius: 12px; margin-top: 20px; }
        .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="calculator-card">
            <h1 class="calculator-title">Kelly Criterion Calculator</h1>
            <p class="calculator-subtitle">Calculate optimal position size using Kelly Criterion for maximum long-term growth.</p>
            
            <div class="input-group">
                <label class="input-label">Win Probability (%)</label>
                <input type="number" id="winProb" class="input-field" placeholder="55" min="0" max="100" step="0.1">
                <div style="color: #666; font-size: 0.85rem; margin-top: 5px;">Historical win rate of your strategy</div>
            </div>
            
            <div class="input-group">
                <label class="input-label">Average Win (₹)</label>
                <input type="number" id="avgWin" class="input-field" placeholder="1000" step="0.01">
                <div style="color: #666; font-size: 0.85rem; margin-top: 5px;">Average profit per winning trade</div>
            </div>
            
            <div class="input-group">
                <label class="input-label">Average Loss (₹)</label>
                <input type="number" id="avgLoss" class="input-field" placeholder="500" step="0.01">
                <div style="color: #666; font-size: 0.85rem; margin-top: 5px;">Average loss per losing trade (positive number)</div>
            </div>
            
            <div class="input-group">
                <label class="input-label">Account Size (₹)</label>
                <input type="number" id="accountSize" class="input-field" placeholder="100000" step="1">
            </div>
            
            <div class="input-group">
                <label class="input-label">Kelly Fraction (%)</label>
                <input type="number" id="kellyFraction" class="input-field" placeholder="50" value="50" min="1" max="100" step="1">
                <div style="color: #666; font-size: 0.85rem; margin-top: 5px;">Use fractional Kelly to reduce risk (50% = Half Kelly recommended)</div>
            </div>
            
            <button class="calculate-btn" onclick="calculateKelly()">
                <i class="fas fa-calculator"></i> Calculate Kelly %
            </button>
        </div>
        
        <div class="results-section" id="resultsSection">
            <div class="calculator-card">
                <h2 style="color: #C9A227; margin-bottom: 30px; font-family: 'Playfair Display', serif;">Kelly Criterion Results</h2>
                
                <div class="grid-2">
                    <div class="result-card">
                        <div style="color: #C9A227; font-weight: 600; margin-bottom: 10px;">Full Kelly %</div>
                        <div class="result-value" id="fullKelly">-</div>
                        <div style="color: #666; margin-top: 5px;">Theoretical optimal size</div>
                    </div>
                    
                    <div class="result-card">
                        <div style="color: #C9A227; font-weight: 600; margin-bottom: 10px;">Recommended Position</div>
                        <div class="result-value" id="recommendedKelly">-</div>
                        <div style="color: #666; margin-top: 5px;">Fractional Kelly size</div>
                    </div>
                    
                    <div class="result-card">
                        <div style="color: #C9A227; font-weight: 600; margin-bottom: 10px;">Position Size</div>
                        <div class="result-value" id="positionSize">-</div>
                        <div style="color: #666; margin-top: 5px;">Amount to risk</div>
                    </div>
                    
                    <div class="result-card">
                        <div style="color: #C9A227; font-weight: 600; margin-bottom: 10px;">Expected Value</div>
                        <div class="result-value" id="expectedValue">-</div>
                        <div style="color: #666; margin-top: 5px;">Per trade expectancy</div>
                    </div>
                </div>
                
                <div id="warningBox" style="display: none;" class="warning-box">
                    <strong><i class="fas fa-exclamation-triangle"></i> Warning:</strong> <span id="warningText"></span>
                </div>
                
                <div class="info-box">
                    <strong><i class="fas fa-info-circle"></i> Important:</strong> Kelly Criterion assumes you know your exact win probability and win/loss ratios. Always use fractional Kelly (25-50%) to account for estimation errors and reduce volatility.
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function calculateKelly() {
            const winProb = parseFloat(document.getElementById('winProb').value) / 100;
            const avgWin = parseFloat(document.getElementById('avgWin').value);
            const avgLoss = parseFloat(document.getElementById('avgLoss').value);
            const accountSize = parseFloat(document.getElementById('accountSize').value);
            const kellyFraction = parseFloat(document.getElementById('kellyFraction').value) / 100;
            
            if (!winProb || !avgWin || !avgLoss || !accountSize) {
                alert('Please fill in all fields');
                return;
            }
            
            const lossProb = 1 - winProb;
            const winLossRatio = avgWin / avgLoss;
            
            // Kelly Formula: K = W - (L / R) where W = win prob, L = loss prob, R = win/loss ratio
            const fullKellyPercent = ((winProb * winLossRatio) - lossProb) / winLossRatio * 100;
            const recommendedKellyPercent = fullKellyPercent * kellyFraction;
            const positionSize = (accountSize * recommendedKellyPercent) / 100;
            
            // Expected Value
            const expectedValue = (winProb * avgWin) - (lossProb * avgLoss);
            
            document.getElementById('fullKelly').textContent = fullKellyPercent.toFixed(2) + '%';
            document.getElementById('recommendedKelly').textContent = recommendedKellyPercent.toFixed(2) + '%';
            document.getElementById('positionSize').textContent = '₹' + positionSize.toLocaleString('en-IN', {maximumFractionDigits: 0});
            document.getElementById('expectedValue').textContent = '₹' + expectedValue.toFixed(2);
            
            // Show warnings
            const warningBox = document.getElementById('warningBox');
            const warningText = document.getElementById('warningText');
            
            if (fullKellyPercent < 0) {
                warningBox.style.display = 'block';
                warningText.textContent = 'Negative Kelly % indicates negative expected value. This strategy is not profitable in the long run.';
            } else if (fullKellyPercent > 20) {
                warningBox.style.display = 'block';
                warningText.textContent = 'Full Kelly exceeds 20%. Consider using fractional Kelly (25-50%) to reduce volatility and account for estimation errors.';
            } else if (expectedValue <= 0) {
                warningBox.style.display = 'block';
                warningText.textContent = 'Negative expected value. Do not trade this strategy.';
            } else {
                warningBox.style.display = 'none';
            }
            
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const isActive = answer.classList.contains('active');
            document.querySelectorAll('.faq-answer').forEach(a => a.classList.remove('active'));
            if (!isActive) answer.classList.add('active');
        }
    </script>
    
    <style>
        .faq-section { max-width: 1200px; margin: 50px auto; padding: 40px 20px; }
        .faq-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: #C9A227; margin-bottom: 40px; text-align: center; }
        .faq-item { background: #1a1a1a; border-radius: 12px; margin-bottom: 15px; border: 1px solid #2a2a2a; overflow: hidden; }
        .faq-question { padding: 25px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; color: #fff; font-weight: 600; font-size: 1.1rem; }
        .faq-question:hover { background: #222; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; background: #0a0a0a; }
        .faq-answer.active { max-height: 500px; }
        .faq-answer p { padding: 25px; margin: 0; color: #999; line-height: 1.8; }
    </style>
    
    <div class="faq-section">
        <h2 class="faq-title">Frequently Asked Questions</h2>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                What is the Kelly Criterion and why should I use it?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>Kelly Criterion is a mathematical formula that determines the optimal position size to maximize long-term wealth growth while minimizing risk of ruin. It considers your win probability, average win/loss ratio, and account size. Using Kelly prevents overtrading (risking too much) and undertrading (missing growth opportunities). It's widely used by professional gamblers, traders, and investors.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                Should I use Full Kelly or Fractional Kelly for trading?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>Most professional traders use Fractional Kelly (25-50% of Full Kelly) because: 1) It reduces volatility and drawdowns, 2) It accounts for estimation errors in win rate and profit/loss ratios, 3) It provides more psychological comfort. Full Kelly can lead to large position sizes and dramatic account swings. Start with 25% Kelly if you're new to position sizing.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                What happens if my Kelly percentage is negative?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>A negative Kelly percentage means your trading strategy has negative expected value - you will lose money over time. This indicates either your win rate is too low, or your average loss is too large compared to average win. Do not trade this strategy. Improve your edge by: better entries, tighter stop losses, bigger profit targets, or higher win rate before risking real money.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                How do I calculate my win probability and average win/loss?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>Use your trading journal history: Win Probability = (Winning Trades ÷ Total Trades) × 100. Average Win = Total Profit from Wins ÷ Number of Wins. Average Loss = Total Loss from Losses ÷ Number of Losses. You need at least 30-50 trades for statistically meaningful data. Paper trade or backtest your strategy if you don't have real trade history.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                Can I use Kelly Criterion for options trading?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>Yes, Kelly Criterion works for options trading. Calculate your historical win rate and average win/loss from past option trades. For options buying, use the premium paid as your loss amount. For options selling, account for potential large losses. Many options traders use even more conservative fractional Kelly (10-25%) due to higher volatility and occasional large losses in options.</p>
            </div>
        </div>
        
        <div class="faq-item">
            <div class="faq-question" onclick="toggleFAQ(this)">
                Is Kelly Criterion better than fixed percentage risk per trade?
                <i class="fas fa-chevron-down" style="color: #C9A227;"></i>
            </div>
            <div class="faq-answer">
                <p>Kelly Criterion is mathematically optimal for growth, while fixed percentage (like 1-2% per trade) is simpler and more conservative. Kelly dynamically adjusts position size based on your edge. Use Kelly if you have: 1) Accurate statistics on your strategy, 2) Consistent trading results, 3) Desire to maximize returns. Use fixed percentage if you prefer simplicity and lower volatility. Both methods work - Kelly is theoretically superior but requires discipline.</p>
            </div>
        </div>
    </div>
</body>
</html>